/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => EasyTypingPlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// core.ts
var import_obsidian = __toModule(require("obsidian"));
var InlineType;
(function(InlineType3) {
  InlineType3["text"] = "text";
  InlineType3["code"] = "code";
  InlineType3["formula"] = "formula";
  InlineType3["link"] = "link";
  InlineType3["user"] = "user-defined";
  InlineType3["none"] = "none";
})(InlineType || (InlineType = {}));
var LineType;
(function(LineType2) {
  LineType2["text"] = "text";
  LineType2["code"] = "code";
  LineType2["formula"] = "formula";
  LineType2["frontmatter"] = "frontmatter";
  LineType2["none"] = "none";
})(LineType || (LineType = {}));
var DEFAULT_SETTINGS = {
  AutoFormatting: true,
  FormattingWhenLineEnd: false,
  ChineseEnglishSpace: true,
  ChineseNoSpace: true,
  Capitalization: true,
  PunctuationSpace: true,
  EnglishSpace: true,
  BraceSpace: true,
  NumberSpace: true,
  InlineCodeSpace: true,
  InlineFormulaSpace: true,
  LinkSpace: true,
  LinkSmartSpace: true,
  FullWidthCharacterEnhance: true,
  UserDefinedRegExp: ":\\w*:\n{{.*?}}\n<.*?>\n\\[\\!.*?\\][+-]{0,1}",
  UserDefinedRegSwitch: true,
  UserPartSpace: true,
  Debug: false
};
function splitArticle(article, checkFrontMatter = true, beginIndex = 0) {
  let retArray = [];
  let lines = article.split("\n");
  console.log("line number", lines.length);
  let regNullLine = /^\s*$/;
  let regFormulaBegin = /^\s*(\- (\[[x ]\] )?)?\$\$/;
  let regFormulaEnd = /\$\$$/;
  let regCodeBegin = /^\s*```/;
  let regCodeEnd = /^\s*```$/;
  let index = beginIndex;
  let regAdmonitionBlockBegin = /^\s*```ad-\w+/g;
  if (checkFrontMatter) {
    let frontMatterPart;
    for (let i = 0; i < lines.length; i++) {
      if (regNullLine.test(lines[i])) {
        continue;
      } else if (lines[i] === "---") {
        for (let j = i + 1; j < lines.length; j++) {
          if (lines[j] === "---") {
            if (i != 0) {
              retArray.push({
                type: LineType.text,
                begin: 0,
                end: i
              });
            }
            frontMatterPart = {
              type: LineType.frontmatter,
              begin: i,
              end: j + 1
            };
            retArray.push(frontMatterPart);
            index = j + 1;
            break;
          }
        }
        break;
      } else {
        break;
      }
    }
  }
  while (index < lines.length) {
    if (regCodeBegin.test(lines[index])) {
      let j = index + 1;
      while (j < lines.length) {
        if (regCodeEnd.test(lines[j]))
          break;
        j++;
      }
      if (j === lines.length || !regAdmonitionBlockBegin.test(lines[index])) {
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.code,
          begin: index,
          end: j + 1
        });
      } else {
        retArray.push({
          type: LineType.code,
          begin: index,
          end: index + 1
        });
        retArray.push({
          type: LineType.text,
          begin: index + 1,
          end: j
        });
        retArray.push({
          type: LineType.code,
          begin: j,
          end: j + 1
        });
      }
      index = j + 1;
    } else if (regFormulaBegin.test(lines[index])) {
      let regFormulaOneLine = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
      if (regFormulaOneLine.test(lines[index])) {
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: index + 1
        });
        index += 1;
      } else {
        let j = index + 1;
        while (j < lines.length) {
          if (regFormulaEnd.test(lines[j]))
            break;
          j++;
        }
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: j + 1
        });
        index = j + 1;
      }
    } else {
      let j = index + 1;
      for (; j < lines.length; j++) {
        if (regCodeBegin.test(lines[j]) || regFormulaBegin.test(lines[j])) {
          break;
        }
      }
      retArray.push({
        type: LineType.text,
        begin: index,
        end: j
      });
      index = j;
    }
  }
  return retArray;
}
function reparseArticleParts(article, prevArticlePart, updateLineStart, print = false) {
  if (prevArticlePart === null || updateLineStart === 0) {
    return splitArticle(article);
  }
  let lines = article.split("\n");
  let res = [];
  let newBeginIndex = 0;
  let changeArticlePartIndex = 0;
  for (let i = 0; i < prevArticlePart.length; i++) {
    if (updateLineStart >= prevArticlePart[i].begin && updateLineStart < prevArticlePart[i].end) {
      newBeginIndex = prevArticlePart[i].begin;
      changeArticlePartIndex = i;
      break;
    } else {
      res.push(prevArticlePart[i]);
    }
  }
  let regAdmonitionBlockBegin = /```ad-\w+/g;
  if (prevArticlePart[changeArticlePartIndex].type === LineType.text && newBeginIndex != 0 && regAdmonitionBlockBegin.test(lines[newBeginIndex - 1])) {
    changeArticlePartIndex -= 1;
    res.pop();
  } else if (prevArticlePart[changeArticlePartIndex].begin === prevArticlePart[changeArticlePartIndex].end - 1 && changeArticlePartIndex >= 2 && regAdmonitionBlockBegin.test(lines[prevArticlePart[changeArticlePartIndex - 2].end - 1])) {
    changeArticlePartIndex -= 2;
    res.pop();
    res.pop();
  }
  if (changeArticlePartIndex === 0) {
    return splitArticle(article);
  }
  newBeginIndex = prevArticlePart[changeArticlePartIndex].begin;
  let newParts = splitArticle(article, false, newBeginIndex);
  for (let j = 0; j < newParts.length; j++) {
    res.push(newParts[j]);
  }
  if (print)
    new import_obsidian.Notice("Reparse Article: begin line index " + newBeginIndex.toString());
  return res;
}
function getLineTypeFromArticleParts(line, typeArray) {
  for (let i = 0; i < typeArray.length; i++) {
    if (line >= typeArray[i].begin && line < typeArray[i].end) {
      return typeArray[i].type;
    }
  }
}
function stringDeleteAt(str, index) {
  return str.substring(0, index) + str.substring(index + 1);
}
function stringInsertAt(str, index, s) {
  return str.substring(0, index) + s + str.substring(index);
}
function splitLine(line, regExps) {
  let regInlineMark = /(?<!\\)\$|(?<!\\)\`/g;
  let regFormulaInline = /(?<!\\)\$(?! )[^]+?(?<! )(?<!\\)\$/g;
  let regFormulaBlock = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
  let regCode = /(?<!\\)`[^]*?(?<!\\)`/g;
  let markQueue = [];
  let arrayOfInlineTextCodeFormula = [];
  while (true) {
    let match = regInlineMark.exec(line);
    if (!match)
      break;
    markQueue.push(match);
  }
  let textBeginIndex = 0;
  while (markQueue.length != 0) {
    let mark = markQueue.shift();
    if (mark.index < textBeginIndex)
      continue;
    if (mark[0] === "$") {
      let matchFormulaBeginIndex;
      let matchFormulaLastIndex;
      regFormulaBlock.lastIndex = mark.index;
      let matchBlockFormula = regFormulaBlock.exec(line);
      if (matchBlockFormula && matchBlockFormula.index === mark.index) {
        matchFormulaBeginIndex = matchBlockFormula.index;
        matchFormulaLastIndex = regFormulaBlock.lastIndex;
      } else {
        regFormulaInline.lastIndex = mark.index;
        let matchInlineFormula = regFormulaInline.exec(line);
        if (matchInlineFormula && matchInlineFormula.index === mark.index) {
          matchFormulaBeginIndex = matchInlineFormula.index;
          matchFormulaLastIndex = regFormulaInline.lastIndex;
        } else {
          continue;
        }
      }
      if (mark.index > textBeginIndex) {
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(textBeginIndex, mark.index),
          type: InlineType.text,
          begin: textBeginIndex,
          end: mark.index
        });
      }
      arrayOfInlineTextCodeFormula.push({
        content: line.substring(matchFormulaBeginIndex, matchFormulaLastIndex),
        type: InlineType.formula,
        begin: matchFormulaBeginIndex,
        end: matchFormulaLastIndex
      });
      textBeginIndex = matchFormulaLastIndex;
      continue;
    } else if (mark[0] === "`") {
      let matchCodeBeginIndex;
      let matchCodeLastIndex;
      regCode.lastIndex = mark.index;
      let matchInlineCode = regCode.exec(line);
      if (matchInlineCode && matchInlineCode.index === mark.index) {
        matchCodeBeginIndex = matchInlineCode.index;
        matchCodeLastIndex = regCode.lastIndex;
        if (mark.index > textBeginIndex) {
          arrayOfInlineTextCodeFormula.push({
            content: line.substring(textBeginIndex, mark.index),
            type: InlineType.text,
            begin: textBeginIndex,
            end: mark.index
          });
        }
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(matchCodeBeginIndex, matchCodeLastIndex),
          type: InlineType.code,
          begin: matchCodeBeginIndex,
          end: matchCodeLastIndex
        });
        textBeginIndex = matchCodeLastIndex;
        continue;
      } else {
        continue;
      }
    }
  }
  if (textBeginIndex != line.length) {
    arrayOfInlineTextCodeFormula.push({
      content: line.substring(textBeginIndex),
      type: InlineType.text,
      begin: textBeginIndex,
      end: line.length
    });
  }
  let retArray = [];
  for (let i = 0; i < arrayOfInlineTextCodeFormula.length; i++) {
    if (arrayOfInlineTextCodeFormula[i].type != InlineType.text) {
      retArray.push(arrayOfInlineTextCodeFormula[i]);
    } else {
      let tempArray;
      if (regExps)
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content, regExps);
      else
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content);
      tempArray.forEach((item) => {
        item.begin += arrayOfInlineTextCodeFormula[i].begin;
        item.end += arrayOfInlineTextCodeFormula[i].begin;
        retArray.push(item);
      });
    }
  }
  return retArray;
}
function matchWithReg(text, regExp, type, inlineTypeArray, checkArray = false) {
  let retArray = inlineTypeArray;
  let matchArray = [];
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  while (true) {
    let match = regExp.exec(text);
    if (!match)
      break;
    let valid = true;
    if (checkArray) {
      for (let i = 0; i < retArray.length; i++) {
        if (match.index <= retArray[i].begin) {
          if (regExp.lastIndex <= retArray[i].begin) {
            valid = true;
            break;
          } else if (regExp.lastIndex <= retArray[i].end) {
            valid = false;
            break;
          } else if (regExp.lastIndex > retArray[i].end) {
            let removeCount = 1;
            valid = true;
            for (let j = i + 1; j < retArray.length; j++) {
              if (regExp.lastIndex <= retArray[j].begin) {
                removeCount = j - i;
                valid = true;
                break;
              } else if (regExp.lastIndex < retArray[j].end) {
                valid = false;
                break;
              } else {
                continue;
              }
            }
            if (valid) {
              retArray.splice(i, removeCount);
              i -= 1;
            }
            break;
          }
        }
        if (match.index > retArray[i].begin && match.index < retArray[i].end) {
          valid = false;
          break;
        }
      }
    }
    if (!valid)
      continue;
    matchArray.push({
      content: match[0],
      type,
      begin: match.index,
      end: regExp.lastIndex
    });
  }
  retArray = retArray.concat(matchArray);
  return retArray;
}
function splitTextWithLinkAndUserDefined(text, regExps) {
  let retArray = [];
  let regWikiLink = /\!?\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  let regBareLink = /(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。，！？；：“”‘’\)\(\[\]\{\}']+/g;
  retArray = matchWithReg(text, regWikiLink, InlineType.link, retArray);
  retArray = matchWithReg(text, regMdLink, InlineType.link, retArray);
  let regExpList = [];
  if (regExps) {
    let regs = regExps.split("\n");
    for (let i = 0; i < regs.length; i++) {
      let regNull = /^\s*$/g;
      if (regNull.test(regs[i]))
        continue;
      let isValidReg = true;
      try {
        let regTemp = new RegExp(regs[i], "g");
      } catch (error) {
        isValidReg = false;
        new import_obsidian.Notice("Bad RegExp:" + regs[i]);
      }
      if (isValidReg) {
        regExpList.push(new RegExp(regs[i], "g"));
      }
    }
    let regLen = regExpList.length;
    for (let i = 0; i < regLen; i++) {
      retArray = matchWithReg(text, regExpList[i], InlineType.user, retArray, true);
    }
  }
  retArray = matchWithReg(text, regBareLink, InlineType.link, retArray, true);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  let textArray = [];
  let textBegin = 0;
  let textEnd = 0;
  for (let i = 0; i < retArray.length; i++) {
    if (textBegin < retArray[i].begin) {
      textEnd = retArray[i].begin;
      textArray.push({
        content: text.substring(textBegin, textEnd),
        type: InlineType.text,
        begin: textBegin,
        end: textEnd
      });
    }
    textBegin = retArray[i].end;
  }
  if (textBegin != text.length) {
    textArray.push({
      content: text.substring(textBegin, text.length),
      type: InlineType.text,
      begin: textBegin,
      end: text.length
    });
  }
  retArray = retArray.concat(textArray);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  return retArray;
}
function formatLine(line, curCursor, settings, prevCursor) {
  let ch = curCursor.ch;
  if (line === "")
    return ["", 0, []];
  let lineParts;
  if (settings.UserDefinedRegSwitch) {
    lineParts = splitLine(line, settings.UserDefinedRegExp);
  } else {
    lineParts = splitLine(line);
  }
  let linePartsOrigin = JSON.parse(JSON.stringify(lineParts));
  let inlineChangeList = [];
  let cursorLinePartIndex = -1;
  let cursorRelativeIndex = -1;
  let resultCursorCh = 0;
  for (let i = 0; i < lineParts.length; i++) {
    if (ch > lineParts[i].begin && ch <= lineParts[i].end) {
      cursorLinePartIndex = i;
      cursorRelativeIndex = ch - lineParts[i].begin;
      if (lineParts[i].type === InlineType.text) {
        lineParts[i].content = stringInsertAt(lineParts[i].content, cursorRelativeIndex, "\0");
      }
      break;
    }
  }
  let resultLine = "";
  let offset = 0;
  let prevPartType = InlineType.none;
  let prevTextEndWithSpace = false;
  for (let i = 0; i < lineParts.length; i++) {
    if (i === 0 && lineParts[i].type === InlineType.text && settings.Capitalization) {
      if (prevCursor && cursorLinePartIndex != 0) {
      } else {
        let regFirstSentence = /^\s*(\- (\[[x ]\] )?)?[a-z]/g;
        let regHeaderSentence = /^(#+ |>+ ?)[a-z]/g;
        let textcopy = lineParts[0].content;
        let match = regFirstSentence.exec(textcopy);
        let matchHeader = regHeaderSentence.exec(textcopy);
        let dstCharIndex = -1;
        if (match) {
          dstCharIndex = regFirstSentence.lastIndex - 1;
        } else if (matchHeader) {
          dstCharIndex = regHeaderSentence.lastIndex - 1;
        }
        if (!prevCursor) {
        } else if (prevCursor.line === curCursor.line && dstCharIndex >= prevCursor.ch && dstCharIndex < curCursor.ch) {
        } else {
          dstCharIndex = -1;
        }
        if (dstCharIndex != -1) {
          lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
        }
      }
    }
    switch (lineParts[i].type) {
      case InlineType.text:
        let content = lineParts[i].content;
        if (settings.Capitalization) {
          var reg = /[\.\?\!。！？]([\s]*)[a-z]/g;
          while (true) {
            let match = reg.exec(content);
            if (!match)
              break;
            let tempIndex = reg.lastIndex - 1;
            if (!prevCursor) {
              lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
              content = lineParts[i].content;
            } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
              if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                content = lineParts[i].content;
              }
            }
          }
        }
        if (settings.ChineseEnglishSpace) {
          let reg1 = /([A-Za-z0-9,\.;\?:!])([\u4e00-\u9fa5]+)/gi;
          let reg22 = /([\u4e00-\u9fa5]+)([A-Za-z0-9])/gi;
          lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
          content = lineParts[i].content;
        }
        if (settings.ChineseNoSpace) {
          let reg3 = /([\u4e00-\u9fa5，。、；‘’《》]+)(\s+)([\u4e00-\u9fa5，。、；‘’《》]+)/g;
          while (reg3.exec(content)) {
            lineParts[i].content = content.replace(reg3, "$1$3");
            content = lineParts[i].content;
          }
        }
        if (settings.PunctuationSpace) {
          {
            let reg3 = /([,\.;\?\!])([A-Za-z])/gi;
            while (true) {
              let match = reg3.exec(content);
              if (!match)
                break;
              let tempIndex = reg3.lastIndex - 1;
              if (!prevCursor) {
                content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
              } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
                if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                  content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
                }
              }
            }
            var reg2 = /(:)([A-Za-z0-9_]+[ ,\.\?\\\/;'"，。？；‘“”’、\[\]\-\{\}])/gi;
            lineParts[i].content = content.replace(reg2, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /(\))([A-Za-z0-9\u4e00-\u9fa5]+)/gi;
            let reg22 = /([A-Za-z0-9\u4e00-\u9fa5:,\.\?\!'"]+)(\()/gi;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /([,;\?\!\]\}])([0-9])/g;
            let reg22 = /([0-9])([\[\{])/g;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
        }
        let regStartWithSpace = /^\0?[\s,\.;\?\!，。；？！、（）\]\)\}]/;
        let regEndWithSpace = /[\s，。、：；？！（）\[\(\{]\0?$/;
        let textStartWithSpace = regStartWithSpace.test(content);
        let textEndWithSpace = regEndWithSpace.test(content);
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.link:
            if (lineParts[i].content.charAt(0) === " ")
              break;
            let regBareLink = /^(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。,;:，！？；：“”‘’\)\(\[\]\{\}']+/g;
            let isBareLink = false;
            isBareLink = regBareLink.test(lineParts[i - 1].content);
            if (isBareLink) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
              break;
            }
            if (settings.LinkSmartSpace && !textStartWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let twoNeighborChars = "";
              let charAtTextBegin = lineParts[i].content.charAt(0);
              let charAtLinkEnd = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i - 1].content)) {
                charAtLinkEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 3);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i - 1].content)) {
                let regMdLinkEnd = /\]/;
                let charAtLinkEndIndex = lineParts[i - 1].content.search(regMdLinkEnd) - 1;
                charAtLinkEnd = lineParts[i - 1].content.charAt(charAtLinkEndIndex);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              }
              twoNeighborChars = charAtLinkEnd + charAtTextBegin;
              if (!linkWithNoText && !regNoNeedSpace.test(twoNeighborChars)) {
                lineParts[i].content = " " + content;
                content = lineParts[i].content;
              }
            } else if (!settings.LinkSmartSpace && settings.LinkSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          let reg3 = "\0";
          let n = content.search(reg3);
          resultCursorCh = offset + n;
          lineParts[i].content = stringDeleteAt(content, n);
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.text;
        prevTextEndWithSpace = textEndWithSpace;
        break;
      case InlineType.code:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineCodeSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.code;
        prevTextEndWithSpace = false;
        break;
      case InlineType.formula:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineFormulaSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.formula;
        prevTextEndWithSpace = false;
        break;
      case InlineType.link:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            let charAtTextEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 1);
            if (charAtTextEnd === " ")
              break;
            if (settings.LinkSmartSpace && !prevTextEndWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let isBareLink = false;
              let twoNeighborChars = "";
              let charAtLinkBegin = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i].content)) {
                let regAlias = /\|/;
                let charOfAliasBegin = lineParts[i].content.search(regAlias);
                let beginIndex = 2;
                if (lineParts[i].content.charAt(0) === "!")
                  beginIndex = 3;
                if (charOfAliasBegin != 0) {
                  beginIndex = charOfAliasBegin + 1;
                }
                charAtLinkBegin = lineParts[i].content.charAt(beginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i].content)) {
                let regMdLinkBegin = /\[/;
                let charAtLinkBeginIndex = lineParts[i].content.search(regMdLinkBegin) + 1;
                charAtLinkBegin = lineParts[i].content.charAt(charAtLinkBeginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else {
                isBareLink = true;
              }
              twoNeighborChars = charAtTextEnd + charAtLinkBegin;
              if (!linkWithNoText && (isBareLink || !regNoNeedSpace.test(twoNeighborChars))) {
                lineParts[i - 1].content += " ";
                resultLine += " ";
                offset += 1;
              }
            } else if (settings.LinkSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.link;
        prevTextEndWithSpace = false;
        break;
      case InlineType.user:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.UserPartSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.user;
        prevTextEndWithSpace = false;
        break;
    }
  }
  for (let i = 0; i < lineParts.length; i++) {
    if (lineParts[i].type === InlineType.text && lineParts[i].content != linePartsOrigin[i].content) {
      inlineChangeList.push({
        text: lineParts[i].content,
        begin: linePartsOrigin[i].begin,
        end: linePartsOrigin[i].end,
        origin: linePartsOrigin[i].content
      });
    }
  }
  inlineChangeList = inlineChangeList.sort((a, b) => a.begin - b.begin);
  return [resultLine, resultCursorCh, inlineChangeList];
}
function isPositionBefore(pos1, pos2) {
  if (pos1.line < pos2.line)
    return true;
  else if (pos1.line > pos2.line)
    return false;
  else {
    if (pos1.ch < pos2.ch)
      return true;
    else
      return false;
  }
}

// main.ts
function setAttributes(element, attributes) {
  for (let key in attributes) {
    element.setAttribute(key, attributes[key]);
  }
}
var EasyTypingPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.getEditor = () => {
      let editor = null;
      let markdownView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (markdownView) {
        editor = markdownView.editor;
      }
      if (editor === null && this.settings.Debug)
        console.log("can't get editor");
      return editor;
    };
    this.formatArticle = () => {
      if (this.settings.Debug) {
        console.log("Begin format Article");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateArticleParts(editor);
      let lineCount = editor.lineCount();
      for (let i = 0; i < lineCount; i++) {
        if (this.isTextPart(i)) {
          this.FormatLineWithoutCheckPart(editor, i);
        }
      }
      if (this.settings.Debug) {
        new import_obsidian2.Notice("Format Article Done!");
      }
    };
    this.formatSelection = () => {
      if (this.settings.Debug) {
        console.log("Begin format Selection");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateArticleParts(editor);
      if (!editor.somethingSelected() || editor.getSelection() === "") {
        let lineNumber = editor.getCursor().line;
        if (this.isTextPart(lineNumber)) {
          this.FormatLineWithoutCheckPart(editor, lineNumber);
        }
        editor.setCursor({ line: lineNumber, ch: editor.getLine(lineNumber).length });
        return;
      }
      let selection = editor.listSelections()[0];
      let lineBeginReparse = selection.anchor.line;
      if (lineBeginReparse > selection.head.line) {
        lineBeginReparse = selection.head.line;
      }
      this.reparseArticle = { check: true, beginLineNumber: lineBeginReparse };
      let selectedArticle = editor.getSelection();
      let articleParts = splitArticle(selectedArticle);
      let lines = selectedArticle.split("\n");
      let result = "";
      for (let i = 0; i < articleParts.length; i++) {
        if (articleParts[i].type != LineType.text) {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            result += line + "\n";
          }
        } else {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            let newline = formatLine(line, { line: 0, ch: line.length }, this.settings)[0];
            result += newline + "\n";
          }
        }
      }
      result = result.substring(0, result.length - 1);
      editor.replaceSelection(result);
      this.updateArticleParts(editor);
      if (this.settings.Debug) {
        new import_obsidian2.Notice("Format Selection Done!");
        console.log("End format Selection");
      }
    };
    this.handleBeforeInput = (ev) => {
      if (this.settings.Debug)
        console.log("===> Before Input");
      if (!this.settings.FullWidthCharacterEnhance)
        return;
      let editor = this.getEditor();
      if (!editor)
        return;
      let specialChar = new Set(["\u3010", "\u3011", "\xB7", "=", "\u201C", "\u201D", "\u300A", "\u300B", "\u2018", "\u2019", "\uFF08", "\uFF09", "\uFFE5"]);
      if (editor.somethingSelected() && editor.getSelection() != "") {
        if (ev.data.length != 1 || specialChar.has(editor.getSelection()))
          return;
        let selectedFormatRange = editor.listSelections()[0];
        let begin;
        let end;
        let anchor;
        let head;
        if (isPositionBefore(selectedFormatRange.anchor, selectedFormatRange.head)) {
          begin = selectedFormatRange.anchor;
        } else {
          begin = selectedFormatRange.head;
        }
        end = { line: begin.line, ch: begin.ch + 1 };
        anchor = { line: selectedFormatRange.anchor.line, ch: selectedFormatRange.anchor.ch + 1 };
        head = { line: selectedFormatRange.head.line, ch: selectedFormatRange.head.ch + 1 };
        let text;
        switch (ev.data) {
          case "\u3010":
          case "\u3011":
            text = "[" + editor.getSelection() + "]";
            break;
          case "\xB7":
            text = "`" + editor.getSelection() + "`";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\uFFE5":
          case "\xA5":
            text = "$" + editor.getSelection() + "$";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\u201C":
          case "\u201D":
            text = "\u201C" + editor.getSelection() + "\u201D";
            break;
          case "\u2018":
          case "\u2019":
            text = "\u2018" + editor.getSelection() + "\u2019";
            break;
          case "\u300A":
          case "\u300B":
            text = "\u300A" + editor.getSelection() + "\u300B";
            break;
          case "\uFF08":
          case "\uFF09":
            console.log("I am here");
            text = "\uFF08" + editor.getSelection() + "\uFF09";
            break;
          default:
            this.prevCursor = begin;
            let regReparse = /^[\-\$\`]|[\-\$\`]\s*$|\n/m;
            let reg = /[-\`\$]/;
            if (regReparse.test(editor.getSelection()) || reg.test(ev.data)) {
              this.reparseArticle.check = true;
              this.reparseArticle.beginLineNumber = begin.line;
            }
            this.selectionTextChange = null;
            return;
        }
        this.selectionTextChange = {
          begin,
          end,
          text,
          selection: true,
          selectionAnchor: anchor,
          selectionHead: head
        };
      }
    };
    this.handleKeydown = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keydown:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = true;
      if (evt.key === "Control")
        this.ctrlDownLineIndex = editor.getCursor().line;
    };
    this.handleKeyup = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keyup:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = false;
      if (evt.key === "Process" || evt.key === "Shift") {
        return;
      }
      if (evt.key != "Backspace" && evt.key != "Enter" && evt.key != "Delete") {
        this.updateSelection(editor);
      }
      if (this.selectionTextChange && this.settings.AutoFormatting) {
        editor.replaceRange(this.selectionTextChange.text, this.selectionTextChange.begin, this.selectionTextChange.end);
        editor.setSelection(this.selectionTextChange.selectionAnchor, this.selectionTextChange.selectionHead);
        this.prevCursor = this.selectionTextChange.selectionHead;
        this.selectionTextChange = null;
        this.editorChanged = false;
        return;
      }
      this.selectionTextChange = null;
      if (!this.editorChanged || this.settings.AutoFormatting === false) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      if (evt.ctrlKey && (evt.key === "z" || evt.key === "y" || evt.key === "x")) {
        let lineReparseBegin = editor.getCursor().line;
        if (lineReparseBegin > this.ctrlDownLineIndex) {
          lineReparseBegin = this.ctrlDownLineIndex;
        }
        this.reparseArticle = { check: true, beginLineNumber: lineReparseBegin };
        this.updateArticleParts(editor);
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      let regTestReparse = /^[\-\$`]|[\-\$\`]\s*$|\n|\$\$|---|```/gm;
      let cs = editor.getCursor();
      let charAfterCursor = editor.getRange({ line: cs.line, ch: cs.ch }, { line: cs.line, ch: cs.ch + 1 });
      switch (evt.key) {
        case "Backspace":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charBeforeCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Delete":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charAfterCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Enter":
          let prevLineIndex = editor.getCursor().line - 1;
          prevLineIndex = prevLineIndex > 0 ? prevLineIndex : 0;
          if (!evt.ctrlKey)
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line - 1 };
          this.updateArticleParts(editor);
          if (this.isTextPart(prevLineIndex)) {
            if (this.settings.FormattingWhenLineEnd) {
              this.FormatLineWithoutCheckPart(editor, prevLineIndex);
            } else {
              let prevLineEndCursor = { line: prevLineIndex, ch: editor.getLine(prevLineIndex).length };
              this.updateLine(editor, prevLineIndex, prevLineEndCursor, this.settings, prevLineEndCursor, editor.getCursor());
            }
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          return;
        default:
          break;
      }
      let cursor = editor.getCursor();
      {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let threeCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 3 }, { line: cursor.line, ch: cursor.ch });
        if (twoCharactersBeforeCursor === "$$" || threeCharactersBeforeCursor === "```" || threeCharactersBeforeCursor == "---") {
          this.reparseArticle = { check: true, beginLineNumber: cursor.line };
        }
      }
      if (this.settings.FullWidthCharacterEnhance && !editor.somethingSelected()) {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
        let twoCharactersNearCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch + 1 });
        let character2cursor1 = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
        let twoCharactersAfterCursor = editor.getRange({ line: cursor.line, ch: cursor.ch }, { line: cursor.line, ch: cursor.ch + 2 });
        switch (evt.key) {
          case "$":
          case "\uFFE5":
          case "\xA5":
            if (twoCharactersBeforeCursor === "\uFFE5\uFFE5" || twoCharactersBeforeCursor === "\xA5\xA5") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (twoCharactersBeforeCursor === "$$") {
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "$\uFFE5$" || character2cursor1 === "$\xA5$") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "[":
          case "\u3010":
            if (twoCharactersBeforeCursor === "[[" && twoCharactersAfterCursor != "]]" && !editor.somethingSelected()) {
              editor.replaceRange("[[]]", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "`":
          case "\xB7":
            if (twoCharactersBeforeCursor === "\xB7\xB7") {
              editor.replaceRange("``", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "`\xB7`") {
              editor.replaceRange("```\n```", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch + 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "\uFF1A":
          case ":":
          case `;`:
          case `\uFF1B`:
            if (twoCharactersBeforeCursor === "\uFF1B\uFF1B") {
              editor.replaceRange(";", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            } else if (twoCharactersBeforeCursor === "\uFF1A\uFF1A") {
              editor.replaceRange(":", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case `,`:
          case `\uFF0C`:
            if (twoCharactersBeforeCursor === "\uFF0C\uFF0C") {
              editor.replaceRange(",", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3001":
          case "/":
            if (cursor.ch === 1 && charBeforeCursor === "\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u3001\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\\":
            if (twoCharactersBeforeCursor === "\u3001\u3001") {
              editor.replaceRange("\\", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3002":
          case ".":
            if (twoCharactersBeforeCursor === "\u3002\u3002") {
              editor.replaceRange(".", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "(":
          case "\uFF08":
            if (charBeforeCursor === "\uFF08" && twoCharactersNearCursor != "\uFF08\uFF09") {
              editor.replaceRange("\uFF08\uFF09", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\uFF08\uFF08" && twoCharactersNearCursor === "\uFF08\uFF09") {
              editor.replaceRange("()", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u300B":
          case ">":
            if (cursor.ch === 1 && charBeforeCursor === "\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u300B\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            } else if (twoCharactersBeforeCursor === ">\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "<":
          case "\u300A":
            if (charBeforeCursor === "\u300A" && twoCharactersNearCursor != "\u300A\u300B") {
              editor.replaceRange("\u300A\u300B", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u300A\u300A" && twoCharactersNearCursor === "\u300A\u300B") {
              editor.replaceRange("<", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "!":
          case "\uFF01":
            if (twoCharactersBeforeCursor === "\uFF01\uFF01") {
              editor.replaceRange("!", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "|":
          case "\uFF5C":
            if (twoCharactersBeforeCursor === "\uFF5C\uFF5C") {
              editor.replaceRange("|", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case '"':
            if (charBeforeCursor === "\u201C" && twoCharactersNearCursor != "\u201C\u201D") {
              editor.replaceRange("\u201C\u201D", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u201C\u201D" && twoCharactersNearCursor === "\u201D\u201D") {
              editor.replaceRange('""', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "'":
            if (charBeforeCursor === "\u2018" && twoCharactersNearCursor != "\u2018\u2019") {
              editor.replaceRange("\u2018\u2019", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u2018\u2019" && twoCharactersNearCursor === "\u2019\u2019") {
              editor.replaceRange("''", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          default:
            break;
        }
      }
      cursor = editor.getCursor();
      this.updateSelection(editor);
      this.updateArticleParts(editor);
      if (getLineTypeFromArticleParts(cursor.line, this.articleParts) != LineType.text) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      if (!this.settings.FormattingWhenLineEnd) {
        this.updateLine(editor, cursor.line, cursor, this.settings, this.prevCursor);
      }
      this.prevCursor = editor.getCursor();
      this.editorChanged = false;
    };
    this.isTextPart = (lineIndex) => {
      if (getLineTypeFromArticleParts(lineIndex, this.articleParts) === LineType.text) {
        return true;
      }
      return false;
    };
    this.handleClick = () => {
      if (this.settings.Debug)
        console.log("===>Click event triggered");
      let editor = this.getEditor();
      if (!editor)
        return;
      this.prevCursor = editor.getCursor();
      this.updateSelection(editor);
    };
    this.handleFileOpen = (file) => {
      if (file != null) {
        if (this.settings.Debug)
          console.log("===>File open:", file.vault.getName() + "/" + file.path);
        this.reparseArticle = { check: true, beginLineNumber: 0 };
        this.articleParts = null;
      }
    };
    this.handlePaste = (evt, editor, markdownView) => {
      let cursor = editor.getCursor();
      if (this.settings.Debug) {
        console.log("===>Before-Paste");
      }
      this.reparseArticle = { check: true, beginLineNumber: cursor.line };
      this.updateArticleParts(editor);
    };
    this.handleChange = (editor, markdownView) => {
      if (this.settings.Debug) {
        console.log("===>Change Event");
      }
      this.editorChanged = true;
    };
    this.handleSelectBegin = (ev) => {
      if (this.keyDownFlag)
        return;
      if (this.settings.Debug) {
        console.log("===>Select Event");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateSelection(editor);
    };
    this.updateArticleParts = (editor) => {
      if (this.reparseArticle.check || this.articleParts === null) {
        this.articleParts = reparseArticleParts(editor.getValue(), this.articleParts, this.reparseArticle.beginLineNumber, this.settings.Debug);
        this.reparseArticle.check = false;
      }
    };
    this.printArticleParts = (editor) => {
      let article = editor.getValue();
      let lines = article.split("\n");
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
      for (let i = 0; i < this.articleParts.length; i++) {
        console.log("Article Part:", this.articleParts[i].type, this.articleParts[i].begin, this.articleParts[i].end);
        for (let j = this.articleParts[i].begin; j < this.articleParts[i].end; j++) {
          console.log(lines[j]);
        }
      }
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    };
    this.updateSelection = (editor) => {
      this.selectedText = editor.getSelection();
      this.updateCharAroundCursor(editor);
    };
    this.updateCharAroundCursor = (editor) => {
      if (this.selectedText != "")
        return;
      let cursor = editor.getCursor();
      if (cursor.ch != 0) {
        this.charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, cursor);
      } else {
        this.charBeforeCursor = cursor.line != 0 ? "\n" : "";
      }
      if (cursor.ch != editor.getLine(cursor.line).length) {
        this.charAfterCursor = editor.getRange(cursor, { line: cursor.line, ch: cursor.ch + 1 });
      } else {
        this.charAfterCursor = cursor.line != editor.lineCount() - 1 ? "\n" : "";
      }
    };
    this.FormatLineWithoutCheckPart = (editor, line) => {
      let lineString = editor.getLine(line);
      let cs = { line, ch: lineString.length };
      let formattedChange = formatLine(lineString, cs, this.settings);
      let changedLine = formattedChange[0];
      if (changedLine != lineString) {
        editor.replaceRange(changedLine, { line, ch: 0 }, cs);
      }
    };
    this.updateLine = (editor, lineIndex, curCursor, settings, prevCursor, setCursor) => {
      let formattedChange = formatLine(editor.getLine(lineIndex), curCursor, this.settings, this.prevCursor);
      let resultLine = formattedChange[0];
      let resultCurosrCh = formattedChange[1];
      let inlineChangeList = formattedChange[2];
      if (inlineChangeList.length != 0) {
        let offset = 0;
        for (let i = 0; i < inlineChangeList.length; i++) {
          let changeBegin = {
            line: lineIndex,
            ch: inlineChangeList[i].begin + offset
          };
          let changeEnd = {
            line: lineIndex,
            ch: inlineChangeList[i].end + offset
          };
          offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
          editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
        }
        if (!setCursor) {
          editor.setCursor({
            line: lineIndex,
            ch: resultCurosrCh
          });
        } else {
          editor.setCursor(setCursor);
        }
        editor.focus();
      }
    };
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.prevCursor = { line: 0, ch: 0 };
      this.selectionTextChange = null;
      this.editorChanged = false;
      this.keyUpdateCursor = new Set(["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"]);
      this.articleParts = null;
      this.reparseArticle = {
        check: true,
        beginLineNumber: 0
      };
      this.keyDownFlag = false;
      this.selectedText = "";
      this.charBeforeCursor = "";
      this.charAfterCursor = "";
      this.ctrlDownLineIndex = 0;
      this.addCommand({
        id: "easy-typing-format-selection",
        name: "format selected text",
        callback: () => this.formatSelection(),
        hotkeys: [{
          modifiers: ["Ctrl", "Shift"],
          key: "s"
        }]
      });
      this.addCommand({
        id: "easy-typing-format-article",
        name: "format current article",
        callback: () => this.formatArticle(),
        hotkeys: [{
          modifiers: ["Ctrl", "Alt"],
          key: "l"
        }]
      });
      this.addCommand({
        id: "easy-typing-format-switch",
        name: "switch autoformat",
        callback: () => this.switchAutoFormatting(),
        hotkeys: [{
          modifiers: ["Ctrl"],
          key: "tab"
        }]
      });
      this.addSettingTab(new EasyTypingSettingTab(this.app, this));
      this.registerEvent(this.app.workspace.on("editor-change", this.handleChange));
      this.registerEvent(this.app.workspace.on("editor-paste", this.handlePaste));
      this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpen));
      this.registerEvent(this.app.workspace.on("click", this.handleClick));
      this.registerDomEvent(document, "keyup", this.handleKeyup);
      this.registerDomEvent(document, "keydown", this.handleKeydown);
      this.registerDomEvent(document, "beforeinput", this.handleBeforeInput);
      this.registerDomEvent(document, "selectionchange", this.handleSelectBegin);
    });
  }
  onunload() {
  }
  switchAutoFormatting() {
    this.settings.AutoFormatting = this.settings.AutoFormatting ? false : true;
    let status = this.settings.AutoFormatting ? "on" : "off";
    new import_obsidian2.Notice("Autoformat is " + status + "!");
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var EasyTypingSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("a", { text: "More detail is in Github: easy-typing-obsidian", href: "https://github.com/Yaozhuwa/easy-typing-obsidian" });
    containerEl.createEl("h2", { text: "\u603B\u5F00\u5173 (Master Switch)" });
    new import_obsidian2.Setting(containerEl).setName("Auto formatting when typing").setDesc("\u662F\u5426\u5728\u7F16\u8F91\u6587\u6863\u65F6\u81EA\u52A8\u683C\u5F0F\u5316\u6587\u672C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.AutoFormatting).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.AutoFormatting = value;
        console.log("AutoFormatting:", value);
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("LineMode: Only formatting when line end.").setDesc("\u884C\u6A21\u5F0F\uFF1A\u53EA\u5728\u4E00\u884C\u8F93\u5165\u7ED3\u675F\uFF0C\u56DE\u8F66\u521B\u5EFA\u65B0\u884C\u7684\u65F6\u5019\uFF0C\u5BF9\u8BE5\u884C\u8FDB\u884C\u683C\u5F0F\u5316\u3002").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.FormattingWhenLineEnd).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.FormattingWhenLineEnd = value;
        console.log("FormattingWhenLineEnd:", value);
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u8BE6\u7EC6\u89C4\u5219\u5F00\u5173 (Sub Switches)" });
    new import_obsidian2.Setting(containerEl).setName("Full-Width symbol input enhancement").setDesc("\u5168\u89D2\u7B26\u53F7\u8F93\u5165\u589E\u5F3A").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.FullWidthCharacterEnhance).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.FullWidthCharacterEnhance = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between Chinese and English/number").setDesc("\u5728\u4E2D\u6587\u548C\u82F1\u6587/\u6570\u5B57\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseEnglishSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseEnglishSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Delete the Space between Chinese characters").setDesc("\u5728\u4E2D\u6587\u5B57\u7B26\u95F4\u53BB\u9664\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseNoSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseNoSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smartly insert space between text and punctuation").setDesc("\u5728\u6587\u672C\u548C\u6807\u70B9\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.PunctuationSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.PunctuationSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Capitalize the first letter of every sentence").setDesc("\u82F1\u6587\u6BCF\u4E2A\u53E5\u9996\u5B57\u6BCD\u5927\u5199").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Capitalization).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Capitalization = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline code and text").setDesc("\u5728 `\u884C\u5185\u4EE3\u7801` \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineCodeSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineCodeSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline formula and text").setDesc("\u5728 $\u884C\u5185\u516C\u5F0F$ \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineFormulaSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineFormulaSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smart Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSmartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSmartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u81EA\u5B9A\u4E49\u6B63\u5219 (Custom regular expressions)" });
    new import_obsidian2.Setting(containerEl).setName("User Defined RegExp Switch").setDesc("\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\u5F00\u5173\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserDefinedRegSwitch).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserDefinedRegSwitch = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between User Defined Part(selected by RegExp) and text").setDesc("\u5728\u7528\u6237\u81EA\u5B9A\u4E49\u533A\u5757(\u6B63\u5219\u8868\u8FBE\u5F0F\u9009\u62E9)\u548C\u6587\u672C\u4E4B\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserPartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserPartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    const regContentAreaSetting = new import_obsidian2.Setting(containerEl);
    regContentAreaSetting.settingEl.setAttribute("style", "display: grid; grid-template-columns: 1fr;");
    regContentAreaSetting.setName("User-defined RegExp to ignore, one expression per line").setDesc("\u7528\u6237\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316\uFF0C\u6BCF\u884C\u4E00\u4E2A\u8868\u8FBE\u5F0F\uFF0C\u884C\u5C3E\u4E0D\u8981\u968F\u610F\u52A0\u7A7A\u683C");
    const regContentArea = new import_obsidian2.TextAreaComponent(regContentAreaSetting.controlEl);
    setAttributes(regContentArea.inputEl, {
      style: "margin-top: 12px; width: 100%;  height: 30vh;"
    });
    regContentArea.setValue(this.plugin.settings.UserDefinedRegExp).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.UserDefinedRegExp = value;
      this.plugin.saveSettings();
    }));
    containerEl.createEl("a", { text: "RegExp: \u6B63\u5219\u8868\u8FBE\u5F0F", href: "https://javascript.ruanyifeng.com/stdlib/regexp.html#" });
    containerEl.createEl("h2", { text: "Debug" });
    new import_obsidian2.Setting(containerEl).setName("Print debug info in console").setDesc("\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Debug = value;
        yield this.plugin.saveSettings();
      }));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb3JlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRleHRBcmVhQ29tcG9uZW50LCBXb3Jrc3BhY2UsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEVkaXRvclBvc2l0aW9uLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW5saW5lVHlwZSwgTGluZVR5cGUsIEFydGljbGVQYXJ0LCBJbmxpbmVQYXJ0LCBJbmxpbmVDaGFuZ2UgfSBmcm9tIFwiLi9jb3JlXCIgXHJcbmltcG9ydCB7IEZvcm1hdFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9jb3JlJ1xyXG5pbXBvcnQgeyBzcGxpdEFydGljbGUsIHNwbGl0TGluZSwgZm9ybWF0TGluZSwgZ2V0TGluZVR5cGVGcm9tQXJ0aWNsZVBhcnRzLCBpc1Bvc2l0aW9uQmVmb3JlLCByZXBhcnNlQXJ0aWNsZVBhcnRzfSBmcm9tICcuL2NvcmUnXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIEVkaXRvclNlbGVjdGlvbkNoYW5nZXtcclxuXHRiZWdpbjogRWRpdG9yUG9zaXRpb24sXHJcblx0ZW5kOiBFZGl0b3JQb3NpdGlvbixcclxuXHR0ZXh0OiBzdHJpbmcsXHJcblx0c2VsZWN0aW9uOiBib29sZWFuLFxyXG5cdHNlbGVjdGlvbkFuY2hvcjogRWRpdG9yUG9zaXRpb24sXHJcblx0c2VsZWN0aW9uSGVhZDogRWRpdG9yUG9zaXRpb25cclxufVxyXG5cclxuaW50ZXJmYWNlIFBhcnNlQXJ0aWNsZXtcclxuXHRjaGVjazogYm9vbGVhbjtcclxuXHRiZWdpbkxpbmVOdW1iZXI6IG51bWJlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbGVtZW50OiBhbnksIGF0dHJpYnV0ZXM6IGFueSkge1xyXG5cdGZvciAobGV0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XHJcblx0ICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFYXN5VHlwaW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogRm9ybWF0U2V0dGluZ3M7XHJcblx0a2V5VXBkYXRlQ3Vyc29yOiBTZXQ8c3RyaW5nPjtcclxuXHRhcnRpY2xlUGFydHM6IEFydGljbGVQYXJ0W107XHJcblx0c2VsZWN0aW9uVGV4dENoYW5nZTogRWRpdG9yU2VsZWN0aW9uQ2hhbmdlfG51bGw7XHJcblx0cHJldkN1cnNvcjogRWRpdG9yUG9zaXRpb247XHJcblx0cmVwYXJzZUFydGljbGU6IFBhcnNlQXJ0aWNsZTtcclxuXHRlZGl0b3JDaGFuZ2VkOiBib29sZWFuO1xyXG5cclxuXHRzZWxlY3RlZFRleHQ6IHN0cmluZztcclxuXHRjaGFyQmVmb3JlQ3Vyc29yOiBzdHJpbmc7XHJcblx0Y2hhckFmdGVyQ3Vyc29yOiBzdHJpbmc7XHJcblx0a2V5RG93bkZsYWc6IGJvb2xlYW47XHJcblxyXG5cdGN0cmxEb3duTGluZUluZGV4OiBudW1iZXI7XHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMucHJldkN1cnNvciA9IHtsaW5lOjAsIGNoOjB9O1xyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5rZXlVcGRhdGVDdXJzb3IgPSBuZXcgU2V0KFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXSk7XHJcblxyXG5cdFx0dGhpcy5hcnRpY2xlUGFydHMgPSBudWxsO1xyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtcclxuXHRcdFx0Y2hlY2s6IHRydWUsXHJcblx0XHRcdGJlZ2luTGluZU51bWJlcjogMFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmtleURvd25GbGFnID0gZmFsc2U7XHJcblx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9IFwiXCI7XHJcblx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jaGFyQWZ0ZXJDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jdHJsRG93bkxpbmVJbmRleCA9IDA7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiZWFzeS10eXBpbmctZm9ybWF0LXNlbGVjdGlvblwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBzZWxlY3RlZCB0ZXh0XCIsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmZvcm1hdFNlbGVjdGlvbigpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXHJcblx0XHRcdFx0a2V5OiBcInNcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1hcnRpY2xlXCIsXHJcblx0XHRcdG5hbWU6IFwiZm9ybWF0IGN1cnJlbnQgYXJ0aWNsZVwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5mb3JtYXRBcnRpY2xlKCksXHJcblx0XHRcdGhvdGtleXM6IFt7XHJcblx0XHRcdFx0bW9kaWZpZXJzOiBbJ0N0cmwnLCAnQWx0J10sXHJcblx0XHRcdFx0a2V5OiBcImxcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1zd2l0Y2hcIixcclxuXHRcdFx0bmFtZTogXCJzd2l0Y2ggYXV0b2Zvcm1hdFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5zd2l0Y2hBdXRvRm9ybWF0dGluZygpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJ10sXHJcblx0XHRcdFx0a2V5OiBcInRhYlwiXHJcblx0XHRcdH1dLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRWFzeVR5cGluZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgdGhpcy5oYW5kbGVDaGFuZ2UpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScsIHRoaXMuaGFuZGxlUGFzdGUpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMuaGFuZGxlRmlsZU9wZW4pKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljaykpO1xyXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpPT57XHJcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiPT09PmxlYWYgY2hhbmdlIVwiKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi5nZXREaXNwbGF5VGV4dCgpKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpO1xyXG5cdFx0Ly8gfSkpO1xyXG5cclxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5dXApO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bilcclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2JlZm9yZWlucHV0JywgdGhpcy5oYW5kbGVCZWZvcmVJbnB1dCk7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdzZWxlY3QnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdzZWxlY3QnKTsgdGhpcy5oYW5kbGVTZWxlY3QoZXYpO30pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5oYW5kbGVTZWxlY3RCZWdpbik7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdDaGFuZ2U6JywgZXYpfSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0Z2V0RWRpdG9yPSgpOkVkaXRvcnxudWxsPT5cclxuXHR7XHJcblx0XHRsZXQgZWRpdG9yID0gbnVsbDtcclxuXHRcdGxldCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYobWFya2Rvd25WaWV3KVxyXG5cdFx0e1xyXG5cdFx0XHRlZGl0b3IgPSBtYXJrZG93blZpZXcuZWRpdG9yO1xyXG5cdFx0fVxyXG5cdFx0aWYoZWRpdG9yID09PSBudWxsICYmIHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKCdjYW5cXCd0IGdldCBlZGl0b3InKTtcclxuXHRcdHJldHVybiBlZGl0b3I7XHJcblx0fVxyXG5cclxuXHRmb3JtYXRBcnRpY2xlID0gKCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJCZWdpbiBmb3JtYXQgQXJ0aWNsZVwiKTtcclxuXHRcdH1cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdGxldCBsaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XHJcblx0XHRmb3IgKGxldCBpPTA7IGk8bGluZUNvdW50OyBpKyspXHJcblx0XHR7XHJcblx0XHRcdGlmKHRoaXMuaXNUZXh0UGFydChpKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuRm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQoZWRpdG9yLCBpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkZvcm1hdCBBcnRpY2xlIERvbmUhXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Zm9ybWF0U2VsZWN0aW9uID0gKCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJCZWdpbiBmb3JtYXQgU2VsZWN0aW9uXCIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLnVwZGF0ZUFydGljbGVQYXJ0cyhlZGl0b3IpO1xyXG5cclxuXHRcdGlmKCFlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSB8fCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk9PT0nJylcclxuXHRcdHtcclxuXHRcdFx0bGV0IGxpbmVOdW1iZXIgPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0aWYodGhpcy5pc1RleHRQYXJ0KGxpbmVOdW1iZXIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5Gb3JtYXRMaW5lV2l0aG91dENoZWNrUGFydChlZGl0b3IsIGxpbmVOdW1iZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGxpbmVOdW1iZXIsIGNoOmVkaXRvci5nZXRMaW5lKGxpbmVOdW1iZXIpLmxlbmd0aH0pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHNlbGVjdGlvbiA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG5cdFx0bGV0IGxpbmVCZWdpblJlcGFyc2UgPSBzZWxlY3Rpb24uYW5jaG9yLmxpbmU7XHJcblx0XHRpZihsaW5lQmVnaW5SZXBhcnNlPnNlbGVjdGlvbi5oZWFkLmxpbmUpXHJcblx0XHR7XHJcblx0XHRcdGxpbmVCZWdpblJlcGFyc2UgPSBzZWxlY3Rpb24uaGVhZC5saW5lO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmxpbmVCZWdpblJlcGFyc2V9O1xyXG5cclxuXHRcdGxldCBzZWxlY3RlZEFydGljbGUgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcblx0XHRsZXQgYXJ0aWNsZVBhcnRzID0gc3BsaXRBcnRpY2xlKHNlbGVjdGVkQXJ0aWNsZSk7XHJcblx0XHRsZXQgbGluZXMgPSBzZWxlY3RlZEFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG5cdFx0bGV0IHJlc3VsdCA9IFwiXCI7XHJcblx0XHRmb3IobGV0IGk9MDsgaTxhcnRpY2xlUGFydHMubGVuZ3RoOyBpKyspXHJcblx0XHR7XHJcblx0XHRcdGlmKGFydGljbGVQYXJ0c1tpXS50eXBlIT1MaW5lVHlwZS50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGo9YXJ0aWNsZVBhcnRzW2ldLmJlZ2luOyBqPGFydGljbGVQYXJ0c1tpXS5lbmQ7aisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmUgKyAnXFxuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLyBcdTVCRjlcdTZCQ0ZcdTg4NENcdThGREJcdTg4NENcdTY4M0NcdTVGMEZcdTUzMTZcclxuXHRcdFx0XHRmb3IobGV0IGo9YXJ0aWNsZVBhcnRzW2ldLmJlZ2luOyBqPGFydGljbGVQYXJ0c1tpXS5lbmQ7aisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld2xpbmUgPSBmb3JtYXRMaW5lKGxpbmUsIHtsaW5lOjAsIGNoOmxpbmUubGVuZ3RofSwgdGhpcy5zZXR0aW5ncylbMF07XHJcblx0XHRcdFx0XHRyZXN1bHQgKz0gbmV3bGluZSArICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIHJlc3VsdC5sZW5ndGgtMSk7XHJcblx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXN1bHQpO1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJGb3JtYXQgU2VsZWN0aW9uIERvbmUhXCIpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkVuZCBmb3JtYXQgU2VsZWN0aW9uXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3dpdGNoQXV0b0Zvcm1hdHRpbmcoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPyBmYWxzZTp0cnVlO1xyXG4gICAgICAgIGxldCBzdGF0dXMgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPydvbic6J29mZic7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnQXV0b2Zvcm1hdCBpcyAnKyBzdGF0dXMgKychJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHRoYW5kbGVCZWZvcmVJbnB1dD0oZXY6IElucHV0RXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwiPT09PiBCZWZvcmUgSW5wdXRcIik7XHJcblx0XHRpZighdGhpcy5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlKSByZXR1cm47XHJcblx0XHRsZXQgZWRpdG9yID0gdGhpcy5nZXRFZGl0b3IoKTtcclxuXHRcdGlmKCFlZGl0b3IpIHJldHVybjtcclxuXHJcblx0XHQvLyBvYnNpZGlhbiBcdTU3MjggbGl2ZSBwcmV2aWV3IFx1NkEyMVx1NUYwRlx1NEUwQlx1NEYxQVx1NjcwOVx1OTUxOVx1OEJFRlx1OTAwOVx1NEUyRFx1NTMzQVx1NTdERlx1NzY4NCBCdWdcclxuXHRcdGxldCBzcGVjaWFsQ2hhciA9IG5ldyBTZXQoWydcdTMwMTAnLCAnXHUzMDExJywnXHUwMEI3JywgJz0nLCAnXHUyMDFDJywgJ1x1MjAxRCcsICdcdTMwMEEnLCAnXHUzMDBCJywgJ1x1MjAxOCcsICdcdTIwMTknLCAnXHVGRjA4JywgJ1x1RkYwOScsICdcdUZGRTUnXSk7XHJcblxyXG5cdFx0aWYoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkgJiYgZWRpdG9yLmdldFNlbGVjdGlvbigpIT1cIlwiKXtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ0JlZm9yZSBDaGFuZ2UgU2VsZWN0aW9uOicsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSwgXCJcdTY2RkZcdTYzNjJcdTUxODVcdTVCQjlcIixldi5kYXRhKTtcclxuXHRcdFx0aWYoZXYuZGF0YS5sZW5ndGghPTEgfHwgc3BlY2lhbENoYXIuaGFzKGVkaXRvci5nZXRTZWxlY3Rpb24oKSkpIHJldHVybjtcclxuXHJcblx0XHRcdGxldCBzZWxlY3RlZEZvcm1hdFJhbmdlID0gZWRpdG9yLmxpc3RTZWxlY3Rpb25zKClbMF07XHJcblx0XHRcdGxldCBiZWdpbjogRWRpdG9yUG9zaXRpb247XHJcblx0XHRcdGxldCBlbmQ6IEVkaXRvclBvc2l0aW9uO1xyXG5cdFx0XHRsZXQgYW5jaG9yOiBFZGl0b3JQb3NpdGlvbjtcclxuXHRcdFx0bGV0IGhlYWQ6IEVkaXRvclBvc2l0aW9uO1xyXG5cdFx0XHRpZihpc1Bvc2l0aW9uQmVmb3JlKHNlbGVjdGVkRm9ybWF0UmFuZ2UuYW5jaG9yLCBzZWxlY3RlZEZvcm1hdFJhbmdlLmhlYWQpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YmVnaW4gPSBzZWxlY3RlZEZvcm1hdFJhbmdlLmFuY2hvcjtcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdGJlZ2luID0gc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVuZCA9IHtsaW5lOiBiZWdpbi5saW5lLCBjaDogYmVnaW4uY2grMX07XHJcblx0XHRcdGFuY2hvciA9IHtsaW5lOiBzZWxlY3RlZEZvcm1hdFJhbmdlLmFuY2hvci5saW5lLCBjaDogc2VsZWN0ZWRGb3JtYXRSYW5nZS5hbmNob3IuY2grMX07XHJcblx0XHRcdGhlYWQgPSB7bGluZTogc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkLmxpbmUsIGNoOiBzZWxlY3RlZEZvcm1hdFJhbmdlLmhlYWQuY2grMX07XHJcblxyXG5cdFx0XHRsZXQgdGV4dDogc3RyaW5nO1xyXG5cdFx0XHRzd2l0Y2goZXYuZGF0YSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhc2UgJ1x1MzAxMCc6XHJcblx0XHRcdFx0Y2FzZSAnXHUzMDExJzpcclxuXHRcdFx0XHRcdHRleHQgPSBcIltcIitlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrXCJdXCI7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdTAwQjcnOlxyXG5cdFx0XHRcdFx0dGV4dCA9IFwiYFwiK2VkaXRvci5nZXRTZWxlY3Rpb24oKStcImBcIjtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIgPSBiZWdpbi5saW5lXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdUZGRTUnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1MDBBNSc6XHJcblx0XHRcdFx0XHR0ZXh0ID0gXCIkXCIrZWRpdG9yLmdldFNlbGVjdGlvbigpK1wiJFwiO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IHRydWU7XHJcblx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmJlZ2luTGluZU51bWJlciA9IGJlZ2luLmxpbmVcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1x1MjAxQyc6XHJcblx0XHRcdFx0Y2FzZSAnXHUyMDFEJzpcclxuXHRcdFx0XHRcdHRleHQgPSBcIlx1MjAxQ1wiK2VkaXRvci5nZXRTZWxlY3Rpb24oKStcIlx1MjAxRFwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnXHUyMDE4JzpcclxuXHRcdFx0XHRjYXNlICdcdTIwMTknOlxyXG5cdFx0XHRcdFx0dGV4dCA9ICdcdTIwMTgnK2VkaXRvci5nZXRTZWxlY3Rpb24oKSsnXHUyMDE5JztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1x1MzAwQSc6XHJcblx0XHRcdFx0Y2FzZSAnXHUzMDBCJzpcclxuXHRcdFx0XHRcdHRleHQgPSAnXHUzMDBBJytlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrJ1x1MzAwQic7XHJcblx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkYwOCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdUZGMDknOlxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJIGFtIGhlcmVcIilcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ1x1RkYwOCcrZWRpdG9yLmdldFNlbGVjdGlvbigpKydcdUZGMDknO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBjYXNlICd7JzpcclxuICAgICAgICAgICAgICAgIC8vIGNhc2UgJ30nOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRleHQgPSAneycrZWRpdG9yLmdldFNlbGVjdGlvbigpKyd9JztcclxuXHRcdFx0XHQvLyBcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBiZWdpbjtcclxuXHRcdFx0XHRcdGxldCByZWdSZXBhcnNlID0gL15bXFwtXFwkXFxgXXxbXFwtXFwkXFxgXVxccyokfFxcbi9tO1xyXG5cdFx0XHRcdFx0bGV0IHJlZyA9IC9bLVxcYFxcJF0vO1xyXG5cdFx0XHRcdFx0aWYocmVnUmVwYXJzZS50ZXN0KGVkaXRvci5nZXRTZWxlY3Rpb24oKSkgfHwgcmVnLnRlc3QoZXYuZGF0YSkpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmJlZ2luTGluZU51bWJlciA9IGJlZ2luLmxpbmVcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0aW9uVGV4dENoYW5nZSA9IG51bGw7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSB7XHJcblx0XHRcdFx0YmVnaW46IGJlZ2luLFxyXG5cdFx0XHRcdGVuZDogZW5kLFxyXG5cdFx0XHRcdHRleHQ6IHRleHQsXHJcblx0XHRcdFx0c2VsZWN0aW9uOiB0cnVlLFxyXG5cdFx0XHRcdHNlbGVjdGlvbkFuY2hvcjphbmNob3IsXHJcblx0XHRcdFx0c2VsZWN0aW9uSGVhZDogaGVhZFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoYW5kbGVLZXlkb3duPShldnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdrZXkgZG93bicsIGV2dC5rZXksIGV2dC5jdHJsS2V5LCBldnQuc2hpZnRLZXkpO1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09JylcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2tleWRvd246JywgZXZ0LmtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy5rZXlEb3duRmxhZyA9IHRydWU7XHJcblx0XHRpZihldnQua2V5ID09PSAnQ29udHJvbCcpIHRoaXMuY3RybERvd25MaW5lSW5kZXggPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCd0ZXh0IGFmdGVyIGtleSBkb3duOicsIGVkaXRvci5nZXRMaW5lKGVkaXRvci5nZXRDdXJzb3IoKS5saW5lKSk7XHJcblx0fVxyXG5cdFxyXG5cdGhhbmRsZUtleXVwPShldnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXl1cDonLCBldnQua2V5KTtcclxuICAgICAgICB9XHJcblxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLmtleURvd25GbGFnID0gZmFsc2U7XHJcblxyXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU0RTBEXHU2NkY0XHU2NUIwIGVkaXRvckNoYW5nZWQgXHU3Njg0XHU2MzA5XHU5NTJFXHJcblx0XHRpZihldnQua2V5ID09PSAnUHJvY2VzcycgfHwgZXZ0LmtleSA9PT0gJ1NoaWZ0JylcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzY4NFx1NjU4N1x1NjcyQ1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTQwRVx1N0VFRFx1NTIyMFx1OTY2NFx1OTUyRVx1ODlFNlx1NTNEMVx1NjVGNlx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1NjcyQ1xyXG5cdFx0aWYoZXZ0LmtleSE9J0JhY2tzcGFjZScgJiYgZXZ0LmtleSE9J0VudGVyJyAmJiBldnQua2V5IT0nRGVsZXRlJylcclxuXHRcdHtcclxuXHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdH1cclxuXHRcdC8vIGlmKHRoaXMua2V5VXBkYXRlQ3Vyc29yLmhhcyhldnQua2V5KSlcdFx0XHJcblxyXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU3Njg0XHU2MEM1XHU1MUI1XHU0RTBCXHU2MzA5XHU5NTJFXHU0RjdGXHU3NTI4XHU3Mjc5XHU1QjlBXHU3Njg0XHU1MTY4XHU4OUQyXHU3QjI2XHU1M0Y3XHJcblx0XHRpZih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgJiYgdGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZylcclxuXHRcdHtcclxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSh0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UudGV4dCwgdGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlLmJlZ2luLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UuZW5kKTtcclxuXHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uQW5jaG9yLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uSGVhZCk7XHJcblx0XHRcdHRoaXMucHJldkN1cnNvciA9IHRoaXMuc2VsZWN0aW9uVGV4dENoYW5nZS5zZWxlY3Rpb25IZWFkO1xyXG5cdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSBudWxsO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gXHU1NzI4XHU0RUU1XHU0RTBCXHU2MEM1XHU1MUI1XHU0RTBCXHU2M0QyXHU0RUY2XHU0RTBEXHU1NENEXHU1RTk0XHJcblx0XHRpZighdGhpcy5lZGl0b3JDaGFuZ2VkIHx8IHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmc9PT1mYWxzZSlcclxuXHRcdHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NTkwNFx1NzQwNlx1NjRBNFx1NTZERVx1MzAwMVx1NTNDRFx1NjRBNFx1NTZERVx1NTQ4Q1x1NTI2QVx1NTIwN1x1RkYwQ1x1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1Njg2M1xyXG5cdFx0aWYoZXZ0LmN0cmxLZXkgJiYgKGV2dC5rZXk9PT0neicgfHwgZXZ0LmtleT09PSd5JyB8fCBldnQua2V5PT09J3gnKSlcclxuXHRcdHtcclxuXHRcdFx0bGV0IGxpbmVSZXBhcnNlQmVnaW4gPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0aWYobGluZVJlcGFyc2VCZWdpbj50aGlzLmN0cmxEb3duTGluZUluZGV4KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGluZVJlcGFyc2VCZWdpbiA9IHRoaXMuY3RybERvd25MaW5lSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOiBsaW5lUmVwYXJzZUJlZ2lufTtcclxuXHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3JlcGFyc2UgYmVnaW46JywgbGluZVJlcGFyc2VCZWdpbik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTUyMjBcdTk2NjRcdTY1ODdcdTY3MkNcdTU0MEVcdTk3MDBcdTg5ODFcdTkxQ0RcdTY1QjBcdTg5RTNcdTY3OTBcdTY1ODdcdTY3MkNcclxuXHRcdGxldCByZWdUZXN0UmVwYXJzZSA9IC9eW1xcLVxcJGBdfFtcXC1cXCRcXGBdXFxzKiR8XFxufFxcJFxcJHwtLS18YGBgL2dtO1xyXG5cdFx0Ly8gbGV0IHNldFRlc3RSZXBhcnNlID0gbmV3IFNldChbJ1xcbicsICctJywgJyQnLCAnYCddKTtcclxuXHRcdGxldCBjcyA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGxldCBjaGFyQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcblx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaH0sXHJcblx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaCsxfVxyXG5cdFx0KTtcclxuXHRcdHN3aXRjaChldnQua2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRjYXNlICdCYWNrc3BhY2UnOlxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWRUZXh0KVxyXG5cdFx0XHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oYW5jZSlcclxuXHRcdFx0XHQvLyB7XHJcblx0XHRcdFx0Ly8gXHRpZih0aGlzLnNlbGVjdGVkVGV4dD09PSdcdTMwMEEnICYmIGNoYXJBZnRlckN1cnNvcj09PSdcdTMwMEInKVxyXG5cdFx0XHRcdC8vIFx0e1xyXG5cdFx0XHRcdC8vIFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKCcnLCBcclxuXHRcdFx0XHQvLyBcdFx0XHR7bGluZTogY3MubGluZSwgY2g6Y3MuY2h9LFxyXG5cdFx0XHRcdC8vIFx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaCsxfSk7XHJcblx0XHRcdFx0Ly8gXHR9XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckJlZm9yZUN1cnNvcikpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjplZGl0b3IuZ2V0Q3Vyc29yKCkubGluZX07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKGVkaXRvcik7XHJcblx0XHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRjYXNlICdEZWxldGUnOlxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckFmdGVyQ3Vyc29yKSkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmVkaXRvci5nZXRDdXJzb3IoKS5saW5lfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgJ0VudGVyJzpcclxuXHRcdFx0XHRsZXQgcHJldkxpbmVJbmRleCA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lLTE7XHJcblx0XHRcdFx0cHJldkxpbmVJbmRleCA9IHByZXZMaW5lSW5kZXg+MD9wcmV2TGluZUluZGV4OjA7XHJcblx0XHRcdFx0aWYoIWV2dC5jdHJsS2V5KSB0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6ZWRpdG9yLmdldEN1cnNvcigpLmxpbmUtMX07XHJcblx0XHRcdFx0Ly8vaWYgZ2V0IG5ldyBsaW5lLCBmb3JtYXQgUHJldiBsaW5lXHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRpZih0aGlzLmlzVGV4dFBhcnQocHJldkxpbmVJbmRleCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYodGhpcy5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMuRm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQoZWRpdG9yLCBwcmV2TGluZUluZGV4KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0bGV0IHByZXZMaW5lRW5kQ3Vyc29yID0ge2xpbmU6IHByZXZMaW5lSW5kZXgsIGNoOiBlZGl0b3IuZ2V0TGluZShwcmV2TGluZUluZGV4KS5sZW5ndGh9XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVMaW5lKGVkaXRvciwgcHJldkxpbmVJbmRleCwgcHJldkxpbmVFbmRDdXJzb3IsIHRoaXMuc2V0dGluZ3MsIHByZXZMaW5lRW5kQ3Vyc29yLCBlZGl0b3IuZ2V0Q3Vyc29yKCkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cdFx0XHRcdHRoaXMucHJldkN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGxldCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHQvLyBcdTVGNTNcdTUxNDlcdTY4MDdcdTUyNERcdTUxRTBcdTRFMkFcdTVCNTdcdTdCMjZcdTRFM0EgXCIkJFwiIC8gXCJgYGBcIiAvIFwiLS0tXCIgXHU2NUY2XHVGRjBDXHU0RUNFXHU1RjUzXHU1MjREXHU4ODRDXHU5MUNEXHU2NUIwXHU4OUUzXHU2NzkwXHU1MTY4XHU2NTg3XHJcblx0XHR7XHJcblx0XHRcdFxyXG5cdFx0XHRsZXQgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICk7XHJcblx0XHRcdGxldCB0aHJlZUNoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0zfSxcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICApO1xyXG5cclxuXHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gXCIkJFwiIHx8IHRocmVlQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gXCJgYGBcIiB8fCB0aHJlZUNoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT0gXCItLS1cIilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjogY3Vyc29yLmxpbmV9O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU0RTJEXHU2NTg3XHU1MTY4XHU4OUQyXHU3QjI2XHU1M0Y3XHU4RkRFXHU3RUVEXHU4RjkzXHU1MTY1XHU1ODlFXHU1RjNBXHU1MjlGXHU4MEZEXHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2UgJiYgIWVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpKVxyXG4gICAgICAgIHtcclxuXHRcdFx0XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG5cdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG5cdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRsZXQgY2hhckJlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuXHRcdFx0KTtcclxuICAgICAgICAgICAgbGV0IHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyMmN1cnNvcjEgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsyfVxyXG4gICAgICAgICAgICApO1xyXG5cdFx0XHRcclxuICAgICAgICAgICAgc3dpdGNoKGV2dC5rZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJyQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRkU1JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MDBBNSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkZFNVx1RkZFNScgfHwgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MDBBNVx1MDBBNScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJyQkJylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjpjdXJzb3IubGluZX07XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSckXHVGRkU1JCcgfHwgY2hhcmFjdGVyMmN1cnNvcjE9PT0nJFx1MDBBNSQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjpjdXJzb3IubGluZX07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdbJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAxMCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1tbJyAmJiB0d29DaGFyYWN0ZXJzQWZ0ZXJDdXJzb3IhPSddXScgJiYhZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tbXV0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnYCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTAwQjcnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTAwQjdcdTAwQjcnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgYCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmN1cnNvci5saW5lfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSdgXHUwMEI3YCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2BgYFxcbmBgYCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkYxQSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICc6JzpcclxuXHRcdFx0XHRjYXNlIGA7YDpcclxuXHRcdFx0XHRjYXNlIGBcdUZGMUJgOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkYxQlx1RkYxQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcblx0XHRcdFx0XHRcdFx0JzsnLFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMUFcdUZGMUEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdFx0XHRjYXNlIGAsYDpcclxuXHRcdFx0XHRjYXNlIGBcdUZGMENgOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkYwQ1x1RkYwQycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJywnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUzMDAxJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJy8nOlxyXG5cdFx0XHRcdFx0aWYoY3Vyc29yLmNoPT09MSAmJiBjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MzAwMScpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MzAwMVx1MzAwMScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1xcXFwnOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MzAwMVx1MzAwMScpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcblx0XHRcdFx0XHRcdFx0J1xcXFwnLFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUzMDAyJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJy4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMDJcdTMwMDInKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJygnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRjA4JzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1RkYwOCcgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdUZGMDhcdUZGMDknKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1x1RkYwOFx1RkYwOScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHVGRjA4XHVGRjA4JyAmJiB0d29DaGFyYWN0ZXJzTmVhckN1cnNvcj09PSdcdUZGMDhcdUZGMDknKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAwQic6XHJcbiAgICAgICAgICAgICAgICBjYXNlICc+JzpcclxuXHRcdFx0XHRcdGlmKGN1cnNvci5jaD09PTEgJiYgY2hhckJlZm9yZUN1cnNvcj09PSdcdTMwMEInKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMEJcdTMwMEInKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc+JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJz5cdTMwMEInKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnPCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTMwMEEnOlxyXG5cdFx0XHRcdFx0aWYgKGNoYXJCZWZvcmVDdXJzb3I9PT0nXHUzMDBBJyAmJiB0d29DaGFyYWN0ZXJzTmVhckN1cnNvciE9J1x1MzAwQVx1MzAwQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXHUzMDBBXHUzMDBCJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9KTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMEFcdTMwMEEnICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MzAwQVx1MzAwQicpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnISc6XHJcblx0XHRcdFx0Y2FzZSAnXHVGRjAxJzpcclxuXHRcdFx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMDFcdUZGMDEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICchJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdFx0XHRjYXNlICd8JzpcclxuXHRcdFx0XHRjYXNlICdcdUZGNUMnOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkY1Q1x1RkY1QycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3wnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1wiJzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MjAxQycgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdTIwMUNcdTIwMUQnKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1x1MjAxQ1x1MjAxRCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTIwMUNcdTIwMUQnICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MjAxRFx1MjAxRCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiXCInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSAnXFwnJzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MjAxOCcgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdTIwMThcdTIwMTknKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG5cdFx0XHRcdFx0XHRcdCdcdTIwMThcdTIwMTknLFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTIwMThcdTIwMTknICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MjAxOVx1MjAxOScpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcblx0XHRcdFx0XHRcdFx0J1xcJ1xcJycsXHJcblx0XHRcdFx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcblx0XHRcdFx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX1cclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblx0XHRjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cclxuXHRcdC8vIFx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NTE2OFx1NjU4N1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHJcblx0XHQvLyBcdTU3MjhcdTk3NUVcdTY1ODdcdTY3MkNcdTg4NENcdTdGMTZcdThGOTFcdTY1RjZcdUZGMENcdTY1RTBcdTk3MDBcdTY4M0NcdTVGMEZcdTUzMTZcclxuXHRcdGlmKGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhjdXJzb3IubGluZSwgdGhpcy5hcnRpY2xlUGFydHMpICE9TGluZVR5cGUudGV4dClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tXHU1QkY5XHU2NTg3XHU2NzJDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2LS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRpZighdGhpcy5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMudXBkYXRlTGluZShlZGl0b3IsIGN1cnNvci5saW5lLCBjdXJzb3IsIHRoaXMuc2V0dGluZ3MsIHRoaXMucHJldkN1cnNvcik7XHJcblx0XHR9XHJcblx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGlzVGV4dFBhcnQ9KGxpbmVJbmRleDpudW1iZXIpOmJvb2xlYW49PlxyXG5cdHtcclxuXHRcdGlmKGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhsaW5lSW5kZXgsIHRoaXMuYXJ0aWNsZVBhcnRzKSA9PT0gTGluZVR5cGUudGV4dClcclxuXHRcdHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDbGljaz0oKT0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coJz09PT5DbGljayBldmVudCB0cmlnZ2VyZWQnKTtcclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZUZpbGVPcGVuPShmaWxlOiBURmlsZSB8IG51bGwpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKGZpbGUhPW51bGwpXHJcblx0XHR7XHJcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwiPT09PkZpbGUgb3BlbjpcIiwgZmlsZS52YXVsdC5nZXROYW1lKCkrJy8nK2ZpbGUucGF0aCk7XHJcblx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjogMH07XHJcblx0XHRcdHRoaXMuYXJ0aWNsZVBhcnRzID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0aGFuZGxlUGFzdGU9KGV2dDogQ2xpcGJvYXJkRXZlbnQsIGVkaXRvcjogRWRpdG9yLCBtYXJrZG93blZpZXc6IE1hcmtkb3duVmlldyk6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUubG9nKCc9PT0+QmVmb3JlLVBhc3RlJyk7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6IGN1cnNvci5saW5lfTtcclxuXHRcdHRoaXMudXBkYXRlQXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDaGFuZ2U9KGVkaXRvcjogRWRpdG9yLCBtYXJrZG93blZpZXc6IE1hcmtkb3duVmlldyk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coJz09PT5DaGFuZ2UgRXZlbnQnKTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coZWRpdG9yLmdldExpbmUoZWRpdG9yLmdldEN1cnNvcigpLmxpbmUpKTtcclxuXHRcdH1cdFx0XHJcblx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlU2VsZWN0QmVnaW49KGV2OiBFdmVudCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5rZXlEb3duRmxhZykgcmV0dXJuO1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCI9PT0+U2VsZWN0IEV2ZW50XCIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlQXJ0aWNsZVBhcnRzPShlZGl0b3I6IEVkaXRvcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayB8fCB0aGlzLmFydGljbGVQYXJ0cyA9PT0gbnVsbClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5hcnRpY2xlUGFydHMgPSByZXBhcnNlQXJ0aWNsZVBhcnRzKGVkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLmFydGljbGVQYXJ0cywgdGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIsIHRoaXMuc2V0dGluZ3MuRGVidWcpO1xyXG5cdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmNoZWNrID0gZmFsc2U7XHJcblx0XHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIHRoaXMucHJpbnRBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaW50QXJ0aWNsZVBhcnRzPShlZGl0b3I6IEVkaXRvcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGFydGljbGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuXHRcdGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG5cdFx0Y29uc29sZS5sb2coJ35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+Jyk7XHJcblx0XHRmb3IgKGxldCBpPTA7aTx0aGlzLmFydGljbGVQYXJ0cy5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBcnRpY2xlIFBhcnQ6XCIsIHRoaXMuYXJ0aWNsZVBhcnRzW2ldLnR5cGUsIHRoaXMuYXJ0aWNsZVBhcnRzW2ldLmJlZ2luLCB0aGlzLmFydGljbGVQYXJ0c1tpXS5lbmQpO1xyXG5cdFx0XHRmb3IobGV0IGo9dGhpcy5hcnRpY2xlUGFydHNbaV0uYmVnaW47IGo8dGhpcy5hcnRpY2xlUGFydHNbaV0uZW5kO2orKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGxpbmVzW2pdKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coJ35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+Jyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVTZWxlY3Rpb249KGVkaXRvcjogRWRpdG9yKTp2b2lkPT5cclxuXHR7XHJcblx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHRcdHRoaXMudXBkYXRlQ2hhckFyb3VuZEN1cnNvcihlZGl0b3IpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlQ2hhckFyb3VuZEN1cnNvcj0oZWRpdG9yOiBFZGl0b3IpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwidXBkYXRlIHNlbGVjdGlvbjpcXG5cIiArIHRoaXMuc2VsZWN0ZWRUZXh0KTtcclxuXHRcdGlmKHRoaXMuc2VsZWN0ZWRUZXh0IT1cIlwiKSByZXR1cm47XHJcblx0XHRsZXQgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHJcblx0XHRpZihjdXJzb3IuY2ghPTApe1xyXG5cdFx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2Uoe2xpbmU6Y3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSwgY3Vyc29yKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdHRoaXMuY2hhckJlZm9yZUN1cnNvciA9IGN1cnNvci5saW5lIT0wP1wiXFxuXCI6XCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZihjdXJzb3IuY2ggIT0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpLmxlbmd0aClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5jaGFyQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoY3Vyc29yLCB7bGluZTpjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9KTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdHRoaXMuY2hhckFmdGVyQ3Vyc29yID0gY3Vyc29yLmxpbmUhPWVkaXRvci5saW5lQ291bnQoKS0xP1wiXFxuXCI6XCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG5cdFx0Ly8ge1xyXG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcImNoYXJCZWZvcmVDdXJzb3JcIiwgdGhpcy5jaGFyQmVmb3JlQ3Vyc29yKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2coXCJjaGFyQWZ0ZXJDdXJzb3JcIiwgdGhpcy5jaGFyQWZ0ZXJDdXJzb3IpO1xyXG5cdFx0Ly8gfVxyXG5cdH1cclxuXHJcblx0Rm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQ9KGVkaXRvcjogRWRpdG9yLCBsaW5lOm51bWJlcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGxpbmVTdHJpbmcgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcclxuXHRcdGxldCBjcyA9IHtsaW5lOiBsaW5lLCBjaDpsaW5lU3RyaW5nLmxlbmd0aH07XHJcblx0XHRsZXQgZm9ybWF0dGVkQ2hhbmdlID0gZm9ybWF0TGluZShsaW5lU3RyaW5nLCBjcywgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRsZXQgY2hhbmdlZExpbmUgPSBmb3JtYXR0ZWRDaGFuZ2VbMF07XHJcblx0XHRpZihjaGFuZ2VkTGluZSAhPSBsaW5lU3RyaW5nKVxyXG5cdFx0e1xyXG5cdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGNoYW5nZWRMaW5lLCB7bGluZTpsaW5lLCBjaDowfSwgY3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dXBkYXRlTGluZT0oZWRpdG9yOiBFZGl0b3IsIGxpbmVJbmRleDogbnVtYmVyLCBjdXJDdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBzZXR0aW5nczogRm9ybWF0U2V0dGluZ3MsIFxyXG5cdFx0cHJldkN1cnNvcj86IEVkaXRvclBvc2l0aW9uLCBzZXRDdXJzb3I/OiBFZGl0b3JQb3NpdGlvbik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGZvcm1hdHRlZENoYW5nZSA9IGZvcm1hdExpbmUoZWRpdG9yLmdldExpbmUobGluZUluZGV4KSwgY3VyQ3Vyc29yLCB0aGlzLnNldHRpbmdzLCB0aGlzLnByZXZDdXJzb3IpO1xyXG5cdFx0bGV0IHJlc3VsdExpbmUgPSBmb3JtYXR0ZWRDaGFuZ2VbMF07XHJcblx0XHRsZXQgcmVzdWx0Q3Vyb3NyQ2g6IG51bWJlciA9IGZvcm1hdHRlZENoYW5nZVsxXTtcclxuXHRcdGxldCBpbmxpbmVDaGFuZ2VMaXN0OiBJbmxpbmVDaGFuZ2VbXT0gZm9ybWF0dGVkQ2hhbmdlWzJdO1xyXG5cclxuXHRcdC8vIGxldCBvcmlnaW5MaW5lU3RyaW5nID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuXHRcdC8vIGxldCBjdXJzb3JMaW5lQmVnaW4gPSB7bGluZTogbGluZUluZGV4LCBjaDowfTtcclxuXHRcdC8vIGxldCBjdXJzb3JMaW5lRW5kID0ge2xpbmU6IGxpbmVJbmRleCwgY2g6b3JpZ2luTGluZVN0cmluZy5sZW5ndGh9O1xyXG5cdFx0Ly8gZWRpdG9yLnJlcGxhY2VSYW5nZShvcmlnaW5MaW5lU3RyaW5nLCBjdXJzb3JMaW5lQmVnaW4sIGN1cnNvckxpbmVFbmQpO1xyXG5cclxuXHRcdC8vIEFwcGx5IENoYW5nZXNcclxuXHRcdGlmKGlubGluZUNoYW5nZUxpc3QubGVuZ3RoICE9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VCZWdpbjpFZGl0b3JQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBsaW5lSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgY2g6IGlubGluZUNoYW5nZUxpc3RbaV0uYmVnaW4rb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlRW5kOkVkaXRvclBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGxpbmVJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBjaDogaW5saW5lQ2hhbmdlTGlzdFtpXS5lbmQrb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0Lmxlbmd0aCAtIGlubGluZUNoYW5nZUxpc3RbaV0ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0LCBjaGFuZ2VCZWdpbiwgY2hhbmdlRW5kKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRpZighc2V0Q3Vyc29yKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7XHJcblx0XHRcdFx0XHRsaW5lOiBsaW5lSW5kZXgsXHJcblx0XHRcdFx0XHRjaDogcmVzdWx0Q3Vyb3NyQ2hcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHNldEN1cnNvcik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2N1cnNvciBjaCcsIHJlc3VsdEN1cm9zckNoKTsgICAgICAgICAgICBcclxuXHRcdFx0ZWRpdG9yLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgRWFzeVR5cGluZ1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IEVhc3lUeXBpbmdQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVhc3lUeXBpbmdQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGxldCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIEVhc3kgVHlwaW5nLid9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2EnLCB7dGV4dDogJ01vcmUgZGV0YWlsIGlzIGluIEdpdGh1YjogZWFzeS10eXBpbmctb2JzaWRpYW4nLCBocmVmOidodHRwczovL2dpdGh1Yi5jb20vWWFvemh1d2EvZWFzeS10eXBpbmctb2JzaWRpYW4nfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1x1NjAzQlx1NUYwMFx1NTE3MyAoTWFzdGVyIFN3aXRjaCknfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkF1dG8gZm9ybWF0dGluZyB3aGVuIHR5cGluZ1wiKVxyXG5cdFx0LnNldERlc2MoXCJcdTY2MkZcdTU0MjZcdTU3MjhcdTdGMTZcdThGOTFcdTY1ODdcdTY4NjNcdTY1RjZcdTgxRUFcdTUyQThcdTY4M0NcdTVGMEZcdTUzMTZcdTY1ODdcdTY3MkNcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nKVxyXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nID0gdmFsdWU7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBdXRvRm9ybWF0dGluZzpcIix2YWx1ZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkxpbmVNb2RlOiBPbmx5IGZvcm1hdHRpbmcgd2hlbiBsaW5lIGVuZC5cIilcclxuXHRcdC5zZXREZXNjKFwiXHU4ODRDXHU2QTIxXHU1RjBGXHVGRjFBXHU1M0VBXHU1NzI4XHU0RTAwXHU4ODRDXHU4RjkzXHU1MTY1XHU3RUQzXHU2NzVGXHVGRjBDXHU1NkRFXHU4RjY2XHU1MjFCXHU1RUZBXHU2NUIwXHU4ODRDXHU3Njg0XHU2NUY2XHU1MDE5XHVGRjBDXHU1QkY5XHU4QkU1XHU4ODRDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHUzMDAyXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuRm9ybWF0dGluZ1doZW5MaW5lRW5kID0gdmFsdWU7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJGb3JtYXR0aW5nV2hlbkxpbmVFbmQ6XCIsdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnXHU4QkU2XHU3RUM2XHU4OUM0XHU1MjE5XHU1RjAwXHU1MTczIChTdWIgU3dpdGNoZXMpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJGdWxsLVdpZHRoIHN5bWJvbCBpbnB1dCBlbmhhbmNlbWVudFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTUxNjhcdTg5RDJcdTdCMjZcdTUzRjdcdThGOTNcdTUxNjVcdTU4OUVcdTVGM0FcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gQ2hpbmVzZSBhbmQgRW5nbGlzaC9udW1iZXJcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4XHU0RTJEXHU2NTg3XHU1NDhDXHU4MkYxXHU2NTg3L1x1NjU3MFx1NUI1N1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZUVuZ2xpc2hTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VFbmdsaXNoU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiRGVsZXRlIHRoZSBTcGFjZSBiZXR3ZWVuIENoaW5lc2UgY2hhcmFjdGVyc1wiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcdTk1RjRcdTUzQkJcdTk2NjRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VOb1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZU5vU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU21hcnRseSBpbnNlcnQgc3BhY2UgYmV0d2VlbiB0ZXh0IGFuZCBwdW5jdHVhdGlvblwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTY1ODdcdTY3MkNcdTU0OENcdTY4MDdcdTcwQjlcdTk1RjRcdTY2N0FcdTgwRkRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlB1bmN0dWF0aW9uU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5QdW5jdHVhdGlvblNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkNhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBvZiBldmVyeSBzZW50ZW5jZVwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTgyRjFcdTY1ODdcdTZCQ0ZcdTRFMkFcdTUzRTVcdTk5OTZcdTVCNTdcdTZCQ0RcdTU5MjdcdTUxOTlcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNhcGl0YWxpemF0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgY29kZSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggYFx1ODg0Q1x1NTE4NVx1NEVFM1x1NzgwMWAgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgZm9ybXVsYSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggJFx1ODg0Q1x1NTE4NVx1NTE2Q1x1NUYwRiQgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBsaW5rIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIlx1NTcyOCBbW3dpa2lsaW5rXV0gbWRsaW5rIFx1NTQ4Q1x1NjU4N1x1NjcyQ1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTbWFydCBTcGFjZSBiZXR3ZWVuIGxpbmsgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4IFtbd2lraWxpbmtdXSBtZGxpbmsgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU2NjdBXHU4MEZEXHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU21hcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkxpbmtTbWFydFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZCNjNcdTUyMTkgKEN1c3RvbSByZWd1bGFyIGV4cHJlc3Npb25zKSd9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiVXNlciBEZWZpbmVkIFJlZ0V4cCBTd2l0Y2hcIilcclxuXHRcdC5zZXREZXNjKFwiXHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU1RjAwXHU1MTczXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ1N3aXRjaCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gVXNlciBEZWZpbmVkIFBhcnQoc2VsZWN0ZWQgYnkgUmVnRXhwKSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTUzM0FcdTU3NTcoXHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU5MDA5XHU2MkU5KVx1NTQ4Q1x1NjU4N1x1NjcyQ1x1NEU0Qlx1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlclBhcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0Y29uc3QgcmVnQ29udGVudEFyZWFTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0cmVnQ29udGVudEFyZWFTZXR0aW5nLnNldHRpbmdFbC5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcInN0eWxlXCIsXHJcblx0XHRcImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1wiXHJcblx0XHQpO1xyXG5cdFx0cmVnQ29udGVudEFyZWFTZXR0aW5nXHJcblx0XHQuc2V0TmFtZShcIlVzZXItZGVmaW5lZCBSZWdFeHAgdG8gaWdub3JlLCBvbmUgZXhwcmVzc2lvbiBwZXIgbGluZVwiKVxyXG5cdFx0LnNldERlc2MoXHJcblx0XHRcdFwiXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHVGRjBDXHU2QkNGXHU4ODRDXHU0RTAwXHU0RTJBXHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU4ODRDXHU1QzNFXHU0RTBEXHU4OTgxXHU5NjhGXHU2MTBGXHU1MkEwXHU3QTdBXHU2ODNDXCJcclxuXHRcdCk7XHJcblx0XHRjb25zdCByZWdDb250ZW50QXJlYSA9IG5ldyBUZXh0QXJlYUNvbXBvbmVudChcclxuXHRcdHJlZ0NvbnRlbnRBcmVhU2V0dGluZy5jb250cm9sRWxcclxuXHRcdCk7XHJcblx0XHRzZXRBdHRyaWJ1dGVzKHJlZ0NvbnRlbnRBcmVhLmlucHV0RWwsIHtcclxuXHRcdHN0eWxlOiBcIm1hcmdpbi10b3A6IDEycHg7IHdpZHRoOiAxMDAlOyAgaGVpZ2h0OiAzMHZoO1wiLFxyXG5cdFx0Ly8gY2xhc3M6IFwibXMtY3NzLWVkaXRvclwiLFxyXG5cdFx0fSk7XHJcblx0XHRyZWdDb250ZW50QXJlYVxyXG5cdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKVxyXG5cdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cCA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH0pO1xyXG5cclxuICAgICAgICAvLyBjb25zdCByZWdDb250ZW50QXJlYSA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0Ly8gLnNldE5hbWUoXCJVc2VyIGRlZmluZWQgUmVnRXhwIHRvIGlnbm9yZSwgb25lIGV4cHJlc3Npb24gcGVyIGxpbmVcIilcclxuXHRcdC8vIC5zZXREZXNjKFwiXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHVGRjBDXHU2QkNGXHU4ODRDXHU0RTAwXHU0RTJBXHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU4ODRDXHU1QzNFXHU0RTBEXHU4OTgxXHU5NjhGXHU2MTBGXHU1MkEwXHU3QTdBXHU2ODNDXCIpXHJcblx0XHQvLyAuYWRkVGV4dEFyZWEoKHRleHQpID0+XHJcblx0XHQvLyBcdHRleHRcclxuXHRcdC8vIFx0LnNldFBsYWNlaG9sZGVyKCc6XFxcXHcqOlxcbnt7Lio/fX0nKVxyXG5cdFx0Ly8gXHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlckRlZmluZWRSZWdFeHApXHJcblx0XHQvLyBcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdC8vIFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cCA9IHZhbHVlO1xyXG4gICAgICAgIC8vICAgICAgICAgaWYodGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwicmVnRXhwIGNoYW5nZWQ6XCIsIHZhbHVlKTtcclxuXHRcdC8vIFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdC8vIFx0fSlcclxuXHRcdC8vICk7XHJcblxyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnUmVnRXhwOiBcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEYnLCBocmVmOidodHRwczovL2phdmFzY3JpcHQucnVhbnlpZmVuZy5jb20vc3RkbGliL3JlZ2V4cC5odG1sIyd9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdEZWJ1Zyd9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiUHJpbnQgZGVidWcgaW5mbyBpbiBjb25zb2xlXCIpXHJcblx0XHQuc2V0RGVzYyhcIlx1NTcyOFx1NjNBN1x1NTIzNlx1NTNGMFx1OEY5M1x1NTFGQVx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5EZWJ1ZyA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEVkaXRvclBvc2l0aW9uLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGVudW0gSW5saW5lVHlwZSB7dGV4dD0ndGV4dCcsIGNvZGU9J2NvZGUnLCBmb3JtdWxhPSdmb3JtdWxhJywgbGluaz0nbGluaycsIHVzZXI9J3VzZXItZGVmaW5lZCcsIG5vbmU9J25vbmUnfVxuZXhwb3J0IGVudW0gTGluZVR5cGUge3RleHQ9J3RleHQnLCBjb2RlPSdjb2RlJywgZm9ybXVsYT0nZm9ybXVsYScsIGZyb250bWF0dGVyPSdmcm9udG1hdHRlcicsIG5vbmU9J25vbmUnfVxuXG5leHBvcnQgaW50ZXJmYWNlIEFydGljbGVQYXJ0XG57XG4gICAgdHlwZTogTGluZVR5cGU7XG4gICAgYmVnaW46IG51bWJlcjtcbiAgICBlbmQ6IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElubGluZVBhcnRcbntcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgdHlwZTogSW5saW5lVHlwZSxcbiAgICBiZWdpbjogbnVtYmVyLFxuICAgIGVuZDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5saW5lQ2hhbmdlXG57XG4gICAgdGV4dDogc3RyaW5nLFxuICAgIGJlZ2luOiBudW1iZXIsXG4gICAgZW5kOiBudW1iZXIsXG4gICAgb3JpZ2luOnN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1hdFNldHRpbmdzXG57XG4gICAgQXV0b0Zvcm1hdHRpbmc6IGJvb2xlYW47XG4gICAgRm9ybWF0dGluZ1doZW5MaW5lRW5kOiBib29sZWFuO1xuXHRDaGluZXNlRW5nbGlzaFNwYWNlOiBib29sZWFuO1xuXHRDaGluZXNlTm9TcGFjZTogYm9vbGVhbjtcbiAgICBDYXBpdGFsaXphdGlvbjogYm9vbGVhbjtcblxuXHRFbmdsaXNoU3BhY2U6IGJvb2xlYW47XG5cdEJyYWNlU3BhY2U6IGJvb2xlYW47XG5cdE51bWJlclNwYWNlOiBib29sZWFuO1xuXG4gICAgUHVuY3R1YXRpb25TcGFjZTogYm9vbGVhbjtcbiAgICBJbmxpbmVDb2RlU3BhY2U6IGJvb2xlYW47XG5cdElubGluZUZvcm11bGFTcGFjZTogYm9vbGVhbjtcbiAgICBMaW5rU3BhY2U6IGJvb2xlYW47XG4gICAgTGlua1NtYXJ0U3BhY2U6IGJvb2xlYW47XG5cbiAgICBGdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlOmJvb2xlYW47XG5cbiAgICBVc2VyRGVmaW5lZFJlZ0V4cDpzdHJpbmc7XG4gICAgVXNlckRlZmluZWRSZWdTd2l0Y2g6IGJvb2xlYW47XG4gICAgVXNlclBhcnRTcGFjZTogYm9vbGVhbjtcblxuICAgIERlYnVnOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRm9ybWF0U2V0dGluZ3MgPSB7XG4gICAgQXV0b0Zvcm1hdHRpbmc6IHRydWUsXG4gICAgRm9ybWF0dGluZ1doZW5MaW5lRW5kOiBmYWxzZSxcblx0Q2hpbmVzZUVuZ2xpc2hTcGFjZTogdHJ1ZSxcblx0Q2hpbmVzZU5vU3BhY2U6IHRydWUsXG4gICAgQ2FwaXRhbGl6YXRpb246IHRydWUsXG5cbiAgICBQdW5jdHVhdGlvblNwYWNlOiB0cnVlLFxuXHRFbmdsaXNoU3BhY2U6IHRydWUsXG5cdEJyYWNlU3BhY2U6IHRydWUsXG5cdE51bWJlclNwYWNlOiB0cnVlLFxuXG4gICAgSW5saW5lQ29kZVNwYWNlOiB0cnVlLFxuXHRJbmxpbmVGb3JtdWxhU3BhY2U6IHRydWUsXG5cdExpbmtTcGFjZTogdHJ1ZSxcbiAgICBMaW5rU21hcnRTcGFjZTogdHJ1ZSxcblxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2U6IHRydWUsXG4gICAgVXNlckRlZmluZWRSZWdFeHA6JzpcXFxcdyo6XFxue3suKj99fVxcbjwuKj8+XFxuXFxcXFtcXFxcIS4qP1xcXFxdWystXXswLDF9JyxcbiAgICBVc2VyRGVmaW5lZFJlZ1N3aXRjaDogdHJ1ZSxcbiAgICBVc2VyUGFydFNwYWNlOnRydWUsXG4gICAgRGVidWc6ZmFsc2Vcbn1cblxuLy8gXHU1QkY5XHU1OTFBXHU4ODRDXHU2NTg3XHU2NzJDXHU4RkRCXHU4ODRDXHU4OUUzXHU2NzkwXHU1Rjk3XHU1MjMwXHU2QkNGXHU4ODRDXHU3Njg0XHU3QzdCXHU1NzhCXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRBcnRpY2xlKGFydGljbGU6c3RyaW5nLCBjaGVja0Zyb250TWF0dGVyOmJvb2xlYW49dHJ1ZSwgYmVnaW5JbmRleDpudW1iZXI9MCk6IEFydGljbGVQYXJ0W11cbntcbiAgICBsZXQgcmV0QXJyYXk6IEFydGljbGVQYXJ0W10gPSBbXTtcbiAgICBsZXQgbGluZXMgPSBhcnRpY2xlLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zb2xlLmxvZygnbGluZSBudW1iZXInLCBsaW5lcy5sZW5ndGgpO1xuICAgIGxldCByZWdOdWxsTGluZSA9IC9eXFxzKiQvO1xuICAgIGxldCByZWdGb3JtdWxhQmVnaW4gPSAvXlxccyooXFwtIChcXFtbeCBdXFxdICk/KT9cXCRcXCQvO1xuICAgIGxldCByZWdGb3JtdWxhRW5kID0gL1xcJFxcJCQvO1xuICAgIGxldCByZWdDb2RlQmVnaW4gPSAvXlxccypgYGAvO1xuICAgIGxldCByZWdDb2RlRW5kID0gL15cXHMqYGBgJC87XG4gICAgbGV0IGluZGV4ID0gYmVnaW5JbmRleDtcbiAgICBsZXQgcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4gPSAvXlxccypgYGBhZC1cXHcrL2c7XG5cbiAgICAvLyAxLiBcdTUyMjRcdTY1QUQgZnJvbnRtYXR0ZXJcdTUzM0FcdTU3REZcbiAgICBpZihjaGVja0Zyb250TWF0dGVyKVxuICAgIHtcbiAgICAgICAgbGV0IGZyb250TWF0dGVyUGFydDogQXJ0aWNsZVBhcnQ7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8bGluZXMubGVuZ3RoO2krKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYocmVnTnVsbExpbmUudGVzdChsaW5lc1tpXSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGxpbmVzW2ldPT09Jy0tLScpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBqPWkrMTsgajxsaW5lcy5sZW5ndGg7aisrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYobGluZXNbal09PT0nLS0tJylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSE9MClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb250TWF0dGVyUGFydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mcm9udG1hdHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGorMVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goZnJvbnRNYXR0ZXJQYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaisxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKCdpbmRleCcsIGluZGV4KTtcblxuICAgIC8vIDIuIFx1OTA0RFx1NTM4Nlx1ODg0Q1x1NUY5N1x1NTIzMCBMaW5lVHlwZSBcdTUyMDZcdTUzM0FcbiAgICB3aGlsZShpbmRleDxsaW5lcy5sZW5ndGgpXG4gICAge1xuICAgICAgICBpZihyZWdDb2RlQmVnaW4udGVzdChsaW5lc1tpbmRleF0pKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XG4gICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZihyZWdDb2RlRW5kLnRlc3QobGluZXNbal0pKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihqPT09bGluZXMubGVuZ3RoIHx8ICFyZWdBZG1vbml0aW9uQmxvY2tCZWdpbi50ZXN0KGxpbmVzW2luZGV4XSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaiA9IGo9PT1saW5lcy5sZW5ndGg/ai0xOmo7XG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6aisxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBcdTVCRjlBZG1pbml0aW9uQm9sY2tcdTUwNUFcdTcyNzlcdTZCOEFcdTU5MDRcdTc0MDZcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUuY29kZSxcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46aW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGVuZDppbmRleCsxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4KzEsXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmosXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ID0gaisxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocmVnRm9ybXVsYUJlZ2luLnRlc3QobGluZXNbaW5kZXhdKSlcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHJlZ0Zvcm11bGFPbmVMaW5lID0gLyg/PCFcXFxcKVxcJFxcJCg/ISApW15dKj8oPzwhICkoPzwhXFxcXClcXCRcXCQvZztcbiAgICAgICAgICAgIGlmKHJlZ0Zvcm11bGFPbmVMaW5lLnRlc3QobGluZXNbaW5kZXhdKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUuZm9ybXVsYSxcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGluZGV4KzFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XG4gICAgICAgICAgICAgICAgd2hpbGUoajxsaW5lcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihyZWdGb3JtdWxhRW5kLnRlc3QobGluZXNbal0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaiA9IGo9PT1saW5lcy5sZW5ndGg/ai0xOmo7XG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZvcm11bGEsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6aisxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBqKzE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XG4gICAgICAgICAgICBmb3IoO2o8bGluZXMubGVuZ3RoO2orKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZihyZWdDb2RlQmVnaW4udGVzdChsaW5lc1tqXSkgfHwgcmVnRm9ybXVsYUJlZ2luLnRlc3QobGluZXNbal0pKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUudGV4dCxcbiAgICAgICAgICAgICAgICBiZWdpbjogaW5kZXgsXG4gICAgICAgICAgICAgICAgZW5kOmpcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5kZXggPSBqO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldEFycmF5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwYXJzZUFydGljbGVQYXJ0cyhhcnRpY2xlOiBzdHJpbmcsIHByZXZBcnRpY2xlUGFydDpBcnRpY2xlUGFydFtdfG51bGwsIHVwZGF0ZUxpbmVTdGFydDogbnVtYmVyLCBwcmludDpib29sZWFuPWZhbHNlKTogQXJ0aWNsZVBhcnRbXVxue1xuICAgIGlmKHByZXZBcnRpY2xlUGFydCA9PT0gbnVsbCB8fCB1cGRhdGVMaW5lU3RhcnQ9PT0wKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHNwbGl0QXJ0aWNsZShhcnRpY2xlKTtcbiAgICB9XG4gICAgbGV0IGxpbmVzID0gYXJ0aWNsZS5zcGxpdCgnXFxuJyk7XG4gICAgbGV0IHJlczogQXJ0aWNsZVBhcnRbXSA9IFtdO1xuICAgIGxldCBuZXdCZWdpbkluZGV4ID0gMDtcbiAgICBsZXQgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleCA9IDA7XG4gICAgZm9yKGxldCBpPTA7aTxwcmV2QXJ0aWNsZVBhcnQubGVuZ3RoO2krKylcbiAgICB7XG4gICAgICAgIGlmKHVwZGF0ZUxpbmVTdGFydD49cHJldkFydGljbGVQYXJ0W2ldLmJlZ2luICYmIHVwZGF0ZUxpbmVTdGFydDxwcmV2QXJ0aWNsZVBhcnRbaV0uZW5kKVxuICAgICAgICB7XG4gICAgICAgICAgICBuZXdCZWdpbkluZGV4ID0gcHJldkFydGljbGVQYXJ0W2ldLmJlZ2luO1xuICAgICAgICAgICAgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleCA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgcmVzLnB1c2gocHJldkFydGljbGVQYXJ0W2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NjYyRkFkbW9uaXRpb25cdTc2ODRcdTdGMTZcdThGOTFcdTU3NTdcbiAgICBsZXQgcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4gPSAvYGBgYWQtXFx3Ky9nO1xuICAgIGlmKCBwcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleF0udHlwZSA9PT0gTGluZVR5cGUudGV4dCAmJiBuZXdCZWdpbkluZGV4IT0wICYmIHJlZ0FkbW9uaXRpb25CbG9ja0JlZ2luLnRlc3QobGluZXNbbmV3QmVnaW5JbmRleC0xXSkpXG4gICAge1xuICAgICAgICBjaGFuZ2VBcnRpY2xlUGFydEluZGV4IC09IDE7XG4gICAgICAgIHJlcy5wb3AoKTtcbiAgICB9XG4gICAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGQWRtb25pdGlvblx1NzY4NFx1NEUwQlx1NjVCOWBgYFx1NTc1N1x1OTBFOFx1NTIwNlxuICAgIGVsc2UgaWYocHJldkFydGljbGVQYXJ0W2NoYW5nZUFydGljbGVQYXJ0SW5kZXhdLmJlZ2luID09PSBwcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleF0uZW5kLTEgJiYgXG4gICAgICAgIGNoYW5nZUFydGljbGVQYXJ0SW5kZXg+PTIgJiYgcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4udGVzdChsaW5lc1twcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleC0yXS5lbmQtMV0pKVxuICAgIHtcbiAgICAgICAgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleCAtPSAyO1xuICAgICAgICByZXMucG9wKCk7XG4gICAgICAgIHJlcy5wb3AoKTtcbiAgICB9XG5cbiAgICBpZihjaGFuZ2VBcnRpY2xlUGFydEluZGV4PT09MClcbiAgICB7XG4gICAgICAgIHJldHVybiBzcGxpdEFydGljbGUoYXJ0aWNsZSk7XG4gICAgfVxuXG4gICAgbmV3QmVnaW5JbmRleCA9IHByZXZBcnRpY2xlUGFydFtjaGFuZ2VBcnRpY2xlUGFydEluZGV4XS5iZWdpbjtcbiAgICBsZXQgbmV3UGFydHMgPSBzcGxpdEFydGljbGUoYXJ0aWNsZSwgZmFsc2UsIG5ld0JlZ2luSW5kZXgpO1xuICAgIGZvcihsZXQgaj0wO2o8bmV3UGFydHMubGVuZ3RoO2orKylcbiAgICB7XG4gICAgICAgIHJlcy5wdXNoKG5ld1BhcnRzW2pdKTtcbiAgICB9XG4gICAgaWYocHJpbnQpIG5ldyBOb3RpY2UoXCJSZXBhcnNlIEFydGljbGU6IGJlZ2luIGxpbmUgaW5kZXggXCIrbmV3QmVnaW5JbmRleC50b1N0cmluZygpKTtcbiAgICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZVR5cGVGcm9tQXJ0aWNsZVBhcnRzKGxpbmU6IG51bWJlciwgdHlwZUFycmF5OiBBcnRpY2xlUGFydFtdKTpMaW5lVHlwZVxue1xuICAgIGZvcihsZXQgaT0wO2k8dHlwZUFycmF5Lmxlbmd0aDtpKyspXG4gICAge1xuICAgICAgICBpZihsaW5lID49IHR5cGVBcnJheVtpXS5iZWdpbiAmJiBsaW5lPHR5cGVBcnJheVtpXS5lbmQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlQXJyYXlbaV0udHlwZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0RlbGV0ZUF0KHN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTpzdHJpbmdcbntcbiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBpbmRleCkrc3RyLnN1YnN0cmluZyhpbmRleCsxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0luc2VydEF0KHN0cjpzdHJpbmcsIGluZGV4OiBudW1iZXIsIHM6IHN0cmluZyk6c3RyaW5nXG57XG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpK3Mrc3RyLnN1YnN0cmluZyhpbmRleCk7XG59XG5cblxuLyoqXG4gKiBcdTUyMDZcdTUyNzJcdTRFMDBcdTg4NENcdTY1ODdcdTY3MkNcdUZGMENcdTVGOTdcdTUyMzBcdTRFMERcdTU0MENcdTUzM0FcdTU3REZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0TGluZShsaW5lOiBzdHJpbmcsIHJlZ0V4cHM/OnN0cmluZyk6IElubGluZVBhcnRbXVxue1xuICAgIGxldCByZWdJbmxpbmVNYXJrID0gLyg/PCFcXFxcKVxcJHwoPzwhXFxcXClcXGAvZztcbiAgICBsZXQgcmVnRm9ybXVsYUlubGluZSA9IC8oPzwhXFxcXClcXCQoPyEgKVteXSs/KD88ISApKD88IVxcXFwpXFwkL2c7XG4gICAgbGV0IHJlZ0Zvcm11bGFCbG9jayA9IC8oPzwhXFxcXClcXCRcXCQoPyEgKVteXSo/KD88ISApKD88IVxcXFwpXFwkXFwkL2c7XG4gICAgbGV0IHJlZ0NvZGUgPSAvKD88IVxcXFwpYFteXSo/KD88IVxcXFwpYC9nO1xuICAgIGxldCBtYXJrUXVldWU6UmVnRXhwRXhlY0FycmF5W10gPSBbXTtcbiAgICBsZXQgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYTogSW5saW5lUGFydFtdID0gW107XG5cbiAgICB3aGlsZSh0cnVlKVxuICAgIHtcbiAgICAgICAgbGV0IG1hdGNoID0gcmVnSW5saW5lTWFyay5leGVjKGxpbmUpO1xuICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xuICAgICAgICBtYXJrUXVldWUucHVzaChtYXRjaCk7XG4gICAgfVxuXG4gICAgbGV0IHRleHRCZWdpbkluZGV4ID0gMDtcbiAgICB3aGlsZShtYXJrUXVldWUubGVuZ3RoIT0wKVxuICAgIHtcbiAgICAgICAgbGV0IG1hcmsgPSBtYXJrUXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYobWFyay5pbmRleDx0ZXh0QmVnaW5JbmRleCkgY29udGludWU7XG5cbiAgICAgICAgaWYobWFya1swXT09PSckJylcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUJlZ2luSW5kZXg6bnVtYmVyO1xuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUxhc3RJbmRleDpudW1iZXI7XG4gICAgICAgICAgICByZWdGb3JtdWxhQmxvY2subGFzdEluZGV4ID0gbWFyay5pbmRleDtcbiAgICAgICAgICAgIGxldCBtYXRjaEJsb2NrRm9ybXVsYSA9IHJlZ0Zvcm11bGFCbG9jay5leGVjKGxpbmUpO1xuICAgICAgICAgICAgaWYobWF0Y2hCbG9ja0Zvcm11bGEgJiYgbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUJlZ2luSW5kZXggPSBtYXRjaEJsb2NrRm9ybXVsYS5pbmRleDtcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFMYXN0SW5kZXggPSByZWdGb3JtdWxhQmxvY2subGFzdEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlZ0Zvcm11bGFJbmxpbmUubGFzdEluZGV4ID0gbWFyay5pbmRleDtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hJbmxpbmVGb3JtdWxhID0gcmVnRm9ybXVsYUlubGluZS5leGVjKGxpbmUpO1xuICAgICAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lRm9ybXVsYSAmJiBtYXRjaElubGluZUZvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhQmVnaW5JbmRleCA9IG1hdGNoSW5saW5lRm9ybXVsYS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhTGFzdEluZGV4ID0gcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NTMzOVx1OTE0RFx1NTIzMFx1RkYwQ1x1NTIxOSBjb250aW51ZVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWFyay5pbmRleD50ZXh0QmVnaW5JbmRleClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKHRleHRCZWdpbkluZGV4LCBtYXJrLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IElubGluZVR5cGUudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbWFyay5pbmRleFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hGb3JtdWxhQmVnaW5JbmRleCwgbWF0Y2hGb3JtdWxhTGFzdEluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmZvcm11bGEsXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOm1hdGNoRm9ybXVsYUJlZ2luSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaEZvcm11bGFMYXN0SW5kZXhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaEZvcm11bGFMYXN0SW5kZXg7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKG1hcmtbMF09PT0nYCcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBtYXRjaENvZGVCZWdpbkluZGV4Om51bWJlcjtcbiAgICAgICAgICAgIGxldCBtYXRjaENvZGVMYXN0SW5kZXg6bnVtYmVyO1xuICAgICAgICAgICAgcmVnQ29kZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xuICAgICAgICAgICAgbGV0IG1hdGNoSW5saW5lQ29kZSA9IHJlZ0NvZGUuZXhlYyhsaW5lKTtcbiAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lQ29kZSAmJiBtYXRjaElubGluZUNvZGUuaW5kZXg9PT1tYXJrLmluZGV4KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1hdGNoQ29kZUJlZ2luSW5kZXggPSBtYXRjaElubGluZUNvZGUuaW5kZXg7XG4gICAgICAgICAgICAgICAgbWF0Y2hDb2RlTGFzdEluZGV4ID0gcmVnQ29kZS5sYXN0SW5kZXg7XG5cbiAgICAgICAgICAgICAgICBpZihtYXJrLmluZGV4PnRleHRCZWdpbkluZGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKHRleHRCZWdpbkluZGV4LCBtYXJrLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXJrLmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGEucHVzaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hDb2RlQmVnaW5JbmRleCwgbWF0Y2hDb2RlTGFzdEluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6SW5saW5lVHlwZS5jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46bWF0Y2hDb2RlQmVnaW5JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaENvZGVMYXN0SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaENvZGVMYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYodGV4dEJlZ2luSW5kZXghPWxpbmUubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKHRleHRCZWdpbkluZGV4KSxcbiAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcbiAgICAgICAgICAgICAgICBiZWdpbjp0ZXh0QmVnaW5JbmRleCxcbiAgICAgICAgICAgICAgICBlbmQ6bGluZS5sZW5ndGhcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH1cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xuICAgIGZvcihsZXQgaT0wO2k8YXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5sZW5ndGg7aSsrKVxuICAgIHtcbiAgICAgICAgaWYoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS50eXBlIT1JbmxpbmVUeXBlLnRleHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldEFycmF5LnB1c2goYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgdGVtcEFycmF5OklubGluZVBhcnRbXTtcbiAgICAgICAgICAgIGlmKHJlZ0V4cHMpXG4gICAgICAgICAgICAgICAgdGVtcEFycmF5ID0gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZChhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmNvbnRlbnQsIHJlZ0V4cHMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRlbXBBcnJheSA9IHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5jb250ZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGVtcEFycmF5LmZvckVhY2goaXRlbT0+e1xuICAgICAgICAgICAgICAgIGl0ZW0uYmVnaW4gKz0gYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5iZWdpbjtcbiAgICAgICAgICAgICAgICBpdGVtLmVuZCArPSBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmJlZ2luO1xuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXRBcnJheTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hXaXRoUmVnKHRleHQ6c3RyaW5nLCByZWdFeHA6UmVnRXhwLCB0eXBlOiBJbmxpbmVUeXBlLCBpbmxpbmVUeXBlQXJyYXk6SW5saW5lUGFydFtdLCBjaGVja0FycmF5PWZhbHNlKTpJbmxpbmVQYXJ0W11cbntcbiAgICBsZXQgcmV0QXJyYXkgPSBpbmxpbmVUeXBlQXJyYXk7XG4gICAgbGV0IG1hdGNoQXJyYXk6SW5saW5lUGFydFtdID0gW107XG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XG4gICAgLy8gY29uc29sZS5sb2coJ2JlZm9yZS0tLS0tLS0tLS0tXFxuJyxyZXRBcnJheSlcbiAgICB3aGlsZSh0cnVlKVxuICAgIHtcbiAgICAgICAgbGV0IG1hdGNoID0gcmVnRXhwLmV4ZWModGV4dCk7IFxuICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxQjJcdTdBODFcbiAgICAgICAgaWYoY2hlY2tBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxyZXRBcnJheS5sZW5ndGg7aSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmKG1hdGNoLmluZGV4PD1yZXRBcnJheVtpXS5iZWdpbilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlZ0V4cC5sYXN0SW5kZXggPD0gcmV0QXJyYXlbaV0uYmVnaW4pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocmVnRXhwLmxhc3RJbmRleCA8PSByZXRBcnJheVtpXS5lbmQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXggPiByZXRBcnJheVtpXS5lbmQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1vdmVDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGo9aSsxOyBqPHJldEFycmF5Lmxlbmd0aDtqKyspXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnRXhwLmxhc3RJbmRleDw9cmV0QXJyYXlbal0uYmVnaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDb3VudCA9IGotaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4PHJldEFycmF5W2pdLmVuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldEFycmF5LnNwbGljZShpLCByZW1vdmVDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYobWF0Y2guaW5kZXg+cmV0QXJyYXlbaV0uYmVnaW4gJiYgbWF0Y2guaW5kZXg8cmV0QXJyYXlbaV0uZW5kKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKCF2YWxpZCkgY29udGludWU7XG4gICAgICAgIG1hdGNoQXJyYXkucHVzaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgIGJlZ2luOiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgICAgICBlbmQ6IHJlZ0V4cC5sYXN0SW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5jb25jYXQobWF0Y2hBcnJheSk7XG4gICAgLy8gY29uc29sZS5sb2coJ0FmdGVyPT09PT09PT09PT1cXG4nLCByZXRBcnJheSk7XG4gICAgcmV0dXJuIHJldEFycmF5O1xufVxuXG5cbi8qKlxuICogXHU1MjA2XHU1MjcyXHU0RTAwXHU4ODRDXHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU5NEZFXHU2M0E1XHU1NDhDXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU3Njg0XHU2QjYzXHU1MjE5XHU5MEU4XHU1MjA2XHVGRjBDXHU1Rjk3XHU1MjMwIElubGluZVBhcnQgXHU3Njg0XHU0RTBEXHU1NDBDXHU1MzNBXHU1N0RGXG4gKi9cbmZ1bmN0aW9uIHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQodGV4dDogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOklubGluZVBhcnRbXVxue1xuICAgIGxldCByZXRBcnJheTogSW5saW5lUGFydFtdID0gW107XG4gICAgbGV0IHJlZ1dpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS9nO1xuICAgIGxldCByZWdNZExpbmsgPSAvXFwhP1xcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcbiAgICAvLyBsZXQgcmVnQmFyZUxpbmsgPSAvKGh0dHBzP3xvYnNpZGlhbnx6b3Rlcm8pOlxcL1xcL1teXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10rL2c7XG4gICAgbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz86XFwvXFwvfGZ0cDpcXC9cXC98b2JzaWRpYW46XFwvXFwvfHpvdGVybzpcXC9cXC98d3d3LilbXlxcc1x1RkYwOFx1RkYwOVx1MzAwQVx1MzAwQlx1MzAwMlx1RkYwQ1x1RkYwMVx1RkYxRlx1RkYxQlx1RkYxQVx1MjAxQ1x1MjAxRFx1MjAxOFx1MjAxOVxcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xuXG4gICAgLy8gMS4gXHU1MzM5XHU5MTREd2lraWxpbmtcbiAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdXaWtpTGluaywgSW5saW5lVHlwZS5saW5rLCByZXRBcnJheSk7XG4gICAgLy8gMi4gXHU1MzM5XHU5MTREbWRsaW5rXG4gICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnTWRMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5KTtcblxuICAgIC8vIDMuIFx1NTMzOVx1OTE0RFx1NzUyOFx1NjIzN1x1ODFFQVx1NUI5QVx1NEU0OVx1NkI2M1x1NTIxOVxuICAgIGxldCByZWdFeHBMaXN0OiBSZWdFeHBbXSA9IFtdO1xuICAgIGlmKHJlZ0V4cHMpXG4gICAge1xuICAgICAgICBsZXQgcmVncyA9IHJlZ0V4cHMuc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ3MubGVuZ3RoO2krKylcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHJlZ051bGwgPSAvXlxccyokL2c7XG4gICAgICAgICAgICBpZihyZWdOdWxsLnRlc3QocmVnc1tpXSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IGlzVmFsaWRSZWcgPSB0cnVlO1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgIGxldCByZWdUZW1wID0gbmV3IFJlZ0V4cChyZWdzW2ldLCAnZycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlcnJvcilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkUmVnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0JhZCBSZWc6JywgcmVnc1tpXSk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkJhZCBSZWdFeHA6XCIgKyByZWdzW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoaXNWYWxpZFJlZykgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVnRXhwTGlzdC5wdXNoKG5ldyBSZWdFeHAocmVnc1tpXSwgJ2cnKSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0dvb2QgUmVnOicsIHJlZ3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCByZWdMZW4gPSByZWdFeHBMaXN0Lmxlbmd0aDtcblxuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ0xlbjtpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ0V4cExpc3RbaV0sIElubGluZVR5cGUudXNlciwgcmV0QXJyYXksIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIDQuIFx1NTMzOVx1OTE0RFx1N0VBRlx1OTRGRVx1NjNBNVxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ0JhcmVMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5LCB0cnVlKTtcblxuICAgIC8vIDUuIFx1NUY5N1x1NTIzMFx1NTI2OVx1NEY1OVx1NzY4NFx1NjU4N1x1NjcyQ1x1OTBFOFx1NTIwNlxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuc29ydCgoYSwgYik6bnVtYmVyPT5hLmJlZ2luLWIuYmVnaW4pO1xuXG4gICAgbGV0IHRleHRBcnJheSA6IElubGluZVBhcnRbXSA9IFtdO1xuICAgIGxldCB0ZXh0QmVnaW4gPSAwO1xuICAgIGxldCB0ZXh0RW5kID0gMDtcbiAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXG4gICAge1xuICAgICAgICBpZih0ZXh0QmVnaW48cmV0QXJyYXlbaV0uYmVnaW4pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRleHRFbmQgPSByZXRBcnJheVtpXS5iZWdpbjtcbiAgICAgICAgICAgIHRleHRBcnJheS5wdXNoKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0RW5kKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogSW5saW5lVHlwZS50ZXh0LFxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luLFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHRleHRFbmRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRleHRCZWdpbiA9IHJldEFycmF5W2ldLmVuZDtcbiAgICB9XG5cbiAgICBpZih0ZXh0QmVnaW4hPXRleHQubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgdGV4dEFycmF5LnB1c2goXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgdHlwZTogSW5saW5lVHlwZS50ZXh0LFxuICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW4sXG4gICAgICAgICAgICAgICAgZW5kOiB0ZXh0Lmxlbmd0aFxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIDYuIFx1NTQwOFx1NUU3Nlx1NjU4N1x1NjcyQ1x1OTBFOFx1NTIwNlx1NTQ4Q1x1NTE3Nlx1NEVENlx1OTBFOFx1NTIwNlxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuY29uY2F0KHRleHRBcnJheSk7XG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XG4gICAgcmV0dXJuIHJldEFycmF5XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdExpbmUobGluZTogc3RyaW5nLCBjdXJDdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBzZXR0aW5nczogRm9ybWF0U2V0dGluZ3MsIHByZXZDdXJzb3I/OiBFZGl0b3JQb3NpdGlvbik6W3N0cmluZywgbnVtYmVyLCBJbmxpbmVDaGFuZ2VbXV18bnVsbFxue1xuICAgIGxldCBjaCA9IGN1ckN1cnNvci5jaDtcbiAgICBpZihsaW5lPT09JycpIHJldHVybiBbJycsIDAsIFtdXTtcblxuICAgIC8vIDEuIFx1NTIxMlx1NTIwNlx1NEUwMFx1ODg0Q1x1NjU4N1x1NUI1N1x1NzY4NFx1NTE4NVx1OTBFOFx1NEUwRFx1NTQwQ1x1NkEyMVx1NTc1N1x1NTMzQVx1NTdERlxuICAgIGxldCBsaW5lUGFydHM6SW5saW5lUGFydFtdO1xuICAgIGlmKHNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoKVxuICAgIHtcbiAgICAgICAgbGluZVBhcnRzID0gc3BsaXRMaW5lKGxpbmUsIHNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgbGluZVBhcnRzID0gc3BsaXRMaW5lKGxpbmUpO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhsaW5lUGFydHMpO1xuXG4gICAgLy8gXHU1OTA3XHU0RUZEXHU1MzlGXHU2NzY1XHU3Njg0bGluZVBhcnRzLCBcdTZERjFcdTYyRjdcdThEMURcbiAgICBsZXQgbGluZVBhcnRzT3JpZ2luID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsaW5lUGFydHMpKTtcbiAgICBsZXQgaW5saW5lQ2hhbmdlTGlzdDpJbmxpbmVDaGFuZ2VbXSA9IFtdO1xuICAgIFxuICAgIGxldCBjdXJzb3JMaW5lUGFydEluZGV4ID0gLTE7XG4gICAgbGV0IGN1cnNvclJlbGF0aXZlSW5kZXggPSAtMTtcbiAgICBsZXQgcmVzdWx0Q3Vyc29yQ2ggPSAwOyAgICAgLy8gXHU4RjkzXHU1MUZBXHU3Njg0XHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXG5cbiAgICAvLyAyLiBcdTYyN0VcdTUyMzBcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTc2ODRcdTkwRThcdTUyMDZcdUZGMENcdTU5ODJcdTY3OUNcdTY2MkYgSW5saW5lUGFydC50ZXh0XHVGRjBDXHU1MjE5XHU1NzI4XHU1MTQ5XHU2ODA3XHU1OTA0XHU2M0QyXHU1MTY1J1xcMCdcdTY3NjVcdTY4MDdcdThCQjBcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcbiAgICBmb3IobGV0IGk9MDtpPGxpbmVQYXJ0cy5sZW5ndGg7aSsrKVxuICAgIHtcbiAgICAgICAgaWYoY2g+bGluZVBhcnRzW2ldLmJlZ2luICYmIGNoPD1saW5lUGFydHNbaV0uZW5kKVxuICAgICAgICB7XG4gICAgICAgICAgICBjdXJzb3JMaW5lUGFydEluZGV4ID0gaTtcbiAgICAgICAgICAgIGN1cnNvclJlbGF0aXZlSW5kZXggPSBjaC1saW5lUGFydHNbaV0uYmVnaW47XG4gICAgICAgICAgICBpZihsaW5lUGFydHNbaV0udHlwZT09PUlubGluZVR5cGUudGV4dClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IHN0cmluZ0luc2VydEF0KGxpbmVQYXJ0c1tpXS5jb250ZW50LCBjdXJzb3JSZWxhdGl2ZUluZGV4LCAnXFwwJyk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0TGluZSA9ICcnO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIC8vIFx1NEZERFx1NUI1OFx1NTI0RFx1NEUwMFx1OTBFOFx1NTIwNlx1NzY4NFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1RkYwQ0lubGluZVR5cGUubm9uZSBcdTRFRTNcdTg4NjhcdTRFMDBcdTg4NENcdTc2ODRcdTVGMDBcdTU5Q0JcbiAgICBsZXQgcHJldlBhcnRUeXBlOnN0cmluZyA9IElubGluZVR5cGUubm9uZTtcbiAgICBsZXQgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcblxuICAgIC8vIDMuIFx1OTA0RFx1NTM4Nlx1NkJDRlx1NEUyQVx1ODg0Q1x1OTBFOFx1NTIwNlx1RkYwQ1x1OEZEQlx1ODg0Q1x1NjgzQ1x1NUYwRlx1NTMxNlx1NTkwNFx1NzQwNlxuICAgIGZvcihsZXQgaT0wO2k8bGluZVBhcnRzLmxlbmd0aDtpKyspXG4gICAge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmxpbmVMaXN0W2ldKTtcblxuICAgICAgICAvLyAzLjEgXHU1OTgyXHU2NzlDXHU4ODRDXHU1MTg1XHU3QjJDXHU0RTAwXHU5MEU4XHU1MjA2XHU0RTNBXHU2NTg3XHU2NzJDXHVGRjBDXHU1MjE5XHU1OTA0XHU3NDA2XHU1M0U1XHU5OTk2XHU1QjU3XHU2QkNEXHU1OTI3XHU1MTk5XHU3Njg0XHU5MEU4XHU1MjA2XG4gICAgICAgIGlmKGk9PT0wICYmIGxpbmVQYXJ0c1tpXS50eXBlPT09SW5saW5lVHlwZS50ZXh0ICYmIHNldHRpbmdzLkNhcGl0YWxpemF0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyAzLjEuMSBcdTU5ODJcdTY3OUMgcHJldkN1cnNvciBcdTRFMTRcdTUxNDlcdTY4MDdcdTRFMERcdTU3MjhcdTZCNjRcdTkwRThcdTUyMDZcdUZGMENcdTUyMTlcdThERjNcdThGQzdcbiAgICAgICAgICAgIGlmKHByZXZDdXJzb3IgJiYgY3Vyc29yTGluZVBhcnRJbmRleCE9MCl7fVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCByZWdGaXJzdFNlbnRlbmNlID0gL15cXHMqKFxcLSAoXFxbW3ggXVxcXSApPyk/W2Etel0vZztcbiAgICAgICAgICAgICAgICBsZXQgcmVnSGVhZGVyU2VudGVuY2UgPSAvXigjKyB8PisgPylbYS16XS9nO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0Y29weSA9IGxpbmVQYXJ0c1swXS5jb250ZW50O1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZ0ZpcnN0U2VudGVuY2UuZXhlYyh0ZXh0Y29weSk7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoSGVhZGVyID0gcmVnSGVhZGVyU2VudGVuY2UuZXhlYyh0ZXh0Y29weSk7XG4gICAgICAgICAgICAgICAgbGV0IGRzdENoYXJJbmRleCA9IC0xO1xuXG4gICAgICAgICAgICAgICAgaWYobWF0Y2gpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkc3RDaGFySW5kZXggPSByZWdGaXJzdFNlbnRlbmNlLmxhc3RJbmRleC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKG1hdGNoSGVhZGVyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gcmVnSGVhZGVyU2VudGVuY2UubGFzdEluZGV4LTE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIXByZXZDdXJzb3Ipe31cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZDdXJzb3IubGluZT09PWN1ckN1cnNvci5saW5lICYmIGRzdENoYXJJbmRleD49cHJldkN1cnNvci5jaCAmJiBkc3RDaGFySW5kZXg8Y3VyQ3Vyc29yLmNoKXt9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgZHN0Q2hhckluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoZHN0Q2hhckluZGV4ICE9IC0xKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzWzBdLmNvbnRlbnQgPSB0ZXh0Y29weS5zdWJzdHJpbmcoMCwgZHN0Q2hhckluZGV4KSt0ZXh0Y29weS5jaGFyQXQoZHN0Q2hhckluZGV4KS50b1VwcGVyQ2FzZSgpK3RleHRjb3B5LnN1YnN0cmluZyhkc3RDaGFySW5kZXgrMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIDMuMiBcdTUyMDZcdTUyMkJcdTU5MDRcdTc0MDZcdTZCQ0ZcdTc5Q0RcdTUzM0FcdTU3NTdcdTYwQzVcdTUxQjVcbiAgICAgICAgc3dpdGNoKGxpbmVQYXJ0c1tpXS50eXBlKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyAzLjIuMSBcdTU5MDRcdTc0MDZcdTY1ODdcdTY3MkNcdTUzM0FcdTU3NTdcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0JlZm9yZScsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxuXG4gICAgICAgICAgICAgICAgLy8gVGV4dC40IFx1NTkwNFx1NzQwNlx1NTNFNVx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNhcGl0YWxpemF0aW9uKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIHJlZyA9IC9bXFwuXFw/XFwhXHUzMDAyXHVGRjAxXHVGRjFGXShbXFxzXSopW2Etel0vZztcblx0XHRcdFx0XHR3aGlsZSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSByZWcuZXhlYyhjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFtYXRjaCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY3Vyc29yTGluZVBhcnRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByZXZDdXJzb3IsIGN1ckN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXByZXZDdXJzb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgY29udGVudC5jaGFyQXQodGVtcEluZGV4KS50b1VwcGVyQ2FzZSgpICsgY29udGVudC5zdWJzdHJpbmcocmVnLmxhc3RJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2Q3Vyc29yICYmIGN1cnNvckxpbmVQYXJ0SW5kZXg9PT1pICYmIHByZXZDdXJzb3IubGluZT09PWN1ckN1cnNvci5saW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBJbmRleD49cHJldkN1cnNvci5jaC1vZmZzZXQgJiYgdGVtcEluZGV4PGN1ckN1cnNvci5jaC1vZmZzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBjb250ZW50LmNoYXJBdCh0ZW1wSW5kZXgpLnRvVXBwZXJDYXNlKCkgKyBjb250ZW50LnN1YnN0cmluZyhyZWcubGFzdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRleHQuMSBcdTU5MDRcdTc0MDZcdTRFMkRcdTgyRjFcdTY1ODdcdTRFNEJcdTk1RjRcdTdBN0FcdTY4M0NcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlKXtcblx0XHRcdFx0XHRsZXQgcmVnMT0vKFtBLVphLXowLTksXFwuO1xcPzohXSkoW1xcdTRlMDAtXFx1OWZhNV0rKS9naTtcblx0XHRcdFx0XHRsZXQgcmVnMj0vKFtcXHU0ZTAwLVxcdTlmYTVdKykoW0EtWmEtejAtOV0pL2dpO1xuXHRcdFx0XHRcdGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZzEsIFwiJDEgJDJcIikucmVwbGFjZShyZWcyLCBcIiQxICQyXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgICAgICAvLyBUZXh0LjIgXHU1OTA0XHU3NDA2XHU0RTJEXHU2NTg3XHU5NUY0XHU2NUUwXHU3QTdBXHU2ODNDXG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuQ2hpbmVzZU5vU3BhY2UpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsZXQgcmVnPS8oW1xcdTRlMDAtXFx1OWZhNVx1RkYwQ1x1MzAwMlx1MzAwMVx1RkYxQlx1MjAxOFx1MjAxOVx1MzAwQVx1MzAwQl0rKShcXHMrKShbXFx1NGUwMC1cXHU5ZmE1XHVGRjBDXHUzMDAyXHUzMDAxXHVGRjFCXHUyMDE4XHUyMDE5XHUzMDBBXHUzMDBCXSspL2c7XG5cdFx0XHRcdFx0d2hpbGUocmVnLmV4ZWMoY29udGVudCkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnLCBcIiQxJDNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5QdW5jdHVhdGlvblNwYWNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGV4dC4zIFx1NTkwNFx1NzQwNlx1ODJGMVx1NjU4N1x1NUI1N1x1NkJDRFx1NEUwRVx1NjgwN1x1NzBCOVx1OTVGNFx1N0E3QVx1NjgzQ1xuICAgICAgICAgICAgICAgICAgICAvLyBpZihzZXR0aW5ncy5FbmdsaXNoU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcgPSAvKFssXFwuO1xcP1xcIV0pKFtBLVphLXpdKS9naTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gcmVnLmV4ZWMoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwcmV2Q3Vyc29yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBcIiBcIiArIGNvbnRlbnQuc3Vic3RyaW5nKHRlbXBJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldkN1cnNvciAmJiBjdXJzb3JMaW5lUGFydEluZGV4PT09aSAmJiBwcmV2Q3Vyc29yLmxpbmU9PT1jdXJDdXJzb3IubGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBJbmRleD49cHJldkN1cnNvci5jaC1vZmZzZXQgJiYgdGVtcEluZGV4PGN1ckN1cnNvci5jaC1vZmZzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgXCIgXCIgKyBjb250ZW50LnN1YnN0cmluZyh0ZW1wSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUzNTVcdTcyRUNcdTU5MDRcdTc0MDZcdTUxOTJcdTUzRjdcdTU0MEVcdTY1ODdcdTY3MkNcdTc2ODRcdTgxRUFcdTUyQThcdTdBN0FcdTY4M0NcdUZGMENcdTRFM0FcdTRFODZcdTUxN0NcdTVCQjkgOmVtb2ppOiBcdTY4M0NcdTVGMEZcdTc2ODRcdThGOTNcdTUxNjVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWcyID0gLyg6KShbQS1aYS16MC05X10rWyAsXFwuXFw/XFxcXFxcLzsnXCJcdUZGMENcdTMwMDJcdUZGMUZcdUZGMUJcdTIwMThcdTIwMUNcdTIwMURcdTIwMTlcdTMwMDFcXFtcXF1cXC1cXHtcXH1dKS9naTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaW5lUGFydHNbaV0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBUZXh0LjUgXHU1OTA0XHU3NDA2XHU4MkYxXHU2NTg3XHU2MkVDXHU1M0Y3XHU0RTBFXHU1OTE2XHU5MEU4XHU2NTg3XHU2NzJDXHU3QTdBXHU2ODNDXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKHNldHRpbmdzLkJyYWNlU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcxID0gLyhcXCkpKFtBLVphLXowLTlcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnMiA9IC8oW0EtWmEtejAtOVxcdTRlMDAtXFx1OWZhNTosXFwuXFw/XFwhJ1wiXSspKFxcKCkvZ2k7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcxLCBcIiQxICQyXCIpLnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRleHQuNiBcdTU5MDRcdTc0MDZcdTY1NzBcdTVCNTdcdTRFMEVcdTY4MDdcdTcwQjlcdTc2ODRcdTdBN0FcdTY4M0NcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoc2V0dGluZ3MuTnVtYmVyU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcxID0gLyhbLDtcXD9cXCFcXF1cXH1dKShbMC05XSkvZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcyID0gLyhbMC05XSkoW1xcW1xce10pL2c7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcxLCBcIiQxICQyXCIpLnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIC8vIFRleHQuNyBcdTVGOTdcdTUyMzBcdTY1ODdcdTY3MkNcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTRFRTVcdTdBN0FcdTc2N0RcdTdCMjZcdTVGMDBcdTU5Q0JcdTYyMTZcdTdFRDNcdTY3NUZcdUZGMENcdTc1MjhcdTY3NjVcdTUyMjRcdTY1QURcdTU0MEVcdTdFRURcdTY1ODdcdTY3MkNcdTUyNERcdTU0MEVcdTY2MkZcdTU0MjZcdTk3MDBcdTg5ODFcdTZERkJcdTUyQTBcdTdBN0FcdTY4M0NcbiAgICAgICAgICAgICAgICBsZXQgcmVnU3RhcnRXaXRoU3BhY2UgPSAvXlxcMD9bXFxzLFxcLjtcXD9cXCFcdUZGMENcdTMwMDJcdUZGMUJcdUZGMUZcdUZGMDFcdTMwMDFcdUZGMDhcdUZGMDlcXF1cXClcXH1dLztcbiAgICAgICAgICAgICAgICBsZXQgcmVnRW5kV2l0aFNwYWNlID0gL1tcXHNcdUZGMENcdTMwMDJcdTMwMDFcdUZGMUFcdUZGMUJcdUZGMUZcdUZGMDFcdUZGMDhcdUZGMDlcXFtcXChcXHtdXFwwPyQvO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0U3RhcnRXaXRoU3BhY2UgPSByZWdTdGFydFdpdGhTcGFjZS50ZXN0KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0RW5kV2l0aFNwYWNlID0gcmVnRW5kV2l0aFNwYWNlLnRlc3QoY29udGVudCk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpLCBsaW5lUGFydHNbaV0uY29udGVudCwgJzsgIXN0YXJ0d2l0aHNwYWNlOicsIXRleHRTdGFydFdpdGhTcGFjZSlcblxuICAgICAgICAgICAgICAgIC8vIFRleHQuOCBcdTY4MzlcdTYzNkVcdTUyNERcdTRFMDBcdTkwRThcdTUyMDZcdTc2ODRcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdTU5MDRcdTc0MDZcdTdBN0FcdTY4M0NcdTZERkJcdTUyQTBcdTc2ODRcdTk1RUVcdTk4OThcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSAmJiAhdGV4dFN0YXJ0V2l0aFNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobGluZVBhcnRzW2ldLmNvbnRlbnQuY2hhckF0KDApPT09JyAnKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdCYXJlTGluayA9IC9eKGh0dHBzPzpcXC9cXC98ZnRwOlxcL1xcL3xvYnNpZGlhbjpcXC9cXC98em90ZXJvOlxcL1xcL3x3d3cuKVteXFxzXHVGRjA4XHVGRjA5XHUzMDBBXHUzMDBCXHUzMDAyLDs6XHVGRjBDXHVGRjAxXHVGRjFGXHVGRjFCXHVGRjFBXHUyMDFDXHUyMDFEXHUyMDE4XHUyMDE5XFwpXFwoXFxbXFxdXFx7XFx9J10rL2c7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNCYXJlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNCYXJlTGluayA9IHJlZ0JhcmVMaW5rLnRlc3QobGluZVBhcnRzW2ktMV0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYmFyZWxpbmsnLCBpc0JhcmVMaW5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNCYXJlTGluaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NtYXJ0U3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnVGVzdFdpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdOb05lZWRTcGFjZSA9IC9bXFx1NGUwMC1cXHU5ZmE1XVtcXHU0ZTAwLVxcdTlmYTVdL2c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0d29OZWlnaGJvckNoYXJzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdFRleHRCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0TGlua0VuZDpzdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rV2l0aE5vVGV4dCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZWdUZXN0V2lraUxpbmsudGVzdChsaW5lUGFydHNbaS0xXS5jb250ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJBdExpbmtFbmQgPSBsaW5lUGFydHNbaS0xXS5jb250ZW50LmNoYXJBdChsaW5lUGFydHNbaS0xXS5jb250ZW50Lmxlbmd0aC0zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0TGlua0VuZD09PSdbJykgbGlua1dpdGhOb1RleHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ01kTGluay50ZXN0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ01kTGlua0VuZCA9IC9cXF0vO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0TGlua0VuZEluZGV4PWxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuc2VhcmNoKHJlZ01kTGlua0VuZCktMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckF0TGlua0VuZCA9IGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuY2hhckF0KGNoYXJBdExpbmtFbmRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoYXJBdExpbmtFbmQ9PT0nWycpIGxpbmtXaXRoTm9UZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d29OZWlnaGJvckNoYXJzID0gY2hhckF0TGlua0VuZCtjaGFyQXRUZXh0QmVnaW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFsaW5rV2l0aE5vVGV4dCAmJiAhcmVnTm9OZWVkU3BhY2UudGVzdCh0d29OZWlnaGJvckNoYXJzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCFzZXR0aW5ncy5MaW5rU21hcnRTcGFjZSAmJiBzZXR0aW5ncy5MaW5rU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFRleHQuOSBcdTU5ODJcdTY3OUNcdTUxNDlcdTY4MDdcdTU3MjhcdThCRTVcdTUzM0FcdTU3NTdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTc2ODRcdTRGNERcdTdGNkVcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlZyA9ICdcXDAnO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGNvbnRlbnQuc2VhcmNoKHJlZylcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBuO1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMjBcdTk2NjQgXFwwXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gc3RyaW5nRGVsZXRlQXQoY29udGVudCwgbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBZnRlcicsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxuICAgICAgICAgICAgICAgIC8vIFRleHQuMTAgXHU1M0Q4XHU5MUNGXHU2NkY0XHU2NUIwXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUudGV4dDtcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IHRleHRFbmRXaXRoU3BhY2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDMuMi4yIFx1NTkwNFx1NzQwNlx1ODg0Q1x1NTE4NVx1NEVFM1x1NzgwMVx1NTc1N1x1OTBFOFx1NTIwNlxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XG4gICAgICAgICAgICAgICAgLy8gQ29kZS4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlIHx8IHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENvZGUuMiBcdTU5ODJcdTY3OUNcdTUxNDlcdTY4MDdcdTU3MjhcdThCRTVcdTUzM0FcdTU3NTdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTc2ODRcdTRGNERcdTdGNkVcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDb2RlLjMgXHU1M0Q4XHU5MUNGXHU2NkY0XHU2NUIwXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUuY29kZTtcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyAzLjIuMyBcdTU5MDRcdTc0MDZcdTg4NENcdTUxODVcdTUxNkNcdTVGMEZcdTc2ODRcdTkwRThcdTUyMDZcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMSBcdTY4MzlcdTYzNkVcdTUyNERcdTRFMDBcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdTU0OENzZXR0aW5nc1x1NkRGQlx1NTJBMFx1N0E3QVx1NjgzQ1xuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRm9ybXVsYS4yIFx1NTk4Mlx1Njc5Q1x1NTE0OVx1NjgwN1x1NTcyOFx1OEJFNVx1NTMzQVx1NTc1N1x1RkYwQ1x1NTIxOVx1OEJBMVx1N0I5N1x1NjcwMFx1N0VDOFx1NTE0OVx1NjgwN1x1NzY4NFx1NEY0RFx1N0Y2RVxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMyBcdTUzRDhcdTkxQ0ZcdTY2RjRcdTY1QjBcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5mb3JtdWxhO1xuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIC8vIDMuMi40IFx1NTkwNFx1NzQwNlx1ODg0Q1x1NTE4NVx1OTRGRVx1NjNBNVx1NzY4NFx1OTBFOFx1NTIwNlxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XG4gICAgICAgICAgICAgICAgLy8gTGluay4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdFRleHRFbmQgPSBsaW5lUGFydHNbaS0xXS5jb250ZW50LmNoYXJBdChsaW5lUGFydHNbaS0xXS5jb250ZW50Lmxlbmd0aC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoYXJBdFRleHRFbmQ9PT0nICcpIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU21hcnRTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ1Rlc3RXaWtpTGluayA9IC9cXCE/XFxbXFxbW15cXFtcXF1dKj9cXF1cXF0vO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdNZExpbmsgPSAvXFwhP1xcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnTm9OZWVkU3BhY2UgPSAvW1xcdTRlMDAtXFx1OWZhNV1bXFx1NGUwMC1cXHU5ZmE1XS9nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0JhcmVMaW5rID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR3b05laWdoYm9yQ2hhcnMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0TGlua0JlZ2luID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtXaXRoTm9UZXh0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnVGVzdFdpa2lMaW5rLnRlc3QobGluZVBhcnRzW2ldLmNvbnRlbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ0FsaWFzID0gL1xcfC87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyT2ZBbGlhc0JlZ2luID0gbGluZVBhcnRzW2ldLmNvbnRlbnQuc2VhcmNoKHJlZ0FsaWFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJpbmRleDogXCIsIGNoYXJPZkFsaWFzQmVnaW4sIGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdChjaGFyT2ZBbGlhc0JlZ2luKzEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlZ2luSW5kZXggPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoMCk9PT0nIScpIGJlZ2luSW5kZXg9MztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJPZkFsaWFzQmVnaW4hPTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luSW5kZXggPSBjaGFyT2ZBbGlhc0JlZ2luKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckF0TGlua0JlZ2luID0gbGluZVBhcnRzW2ldLmNvbnRlbnQuY2hhckF0KGJlZ2luSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGFyQXRMaW5rQmVnaW49PT0nXScpIGxpbmtXaXRoTm9UZXh0ID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ01kTGluay50ZXN0KGxpbmVQYXJ0c1tpXS5jb250ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdNZExpbmtCZWdpbiA9IC9cXFsvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0TGlua0JlZ2luSW5kZXggPSBsaW5lUGFydHNbaV0uY29udGVudC5zZWFyY2gocmVnTWRMaW5rQmVnaW4pKzE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJBdExpbmtCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdChjaGFyQXRMaW5rQmVnaW5JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoYXJBdExpbmtCZWdpbj09PSddJykgbGlua1dpdGhOb1RleHQgPSB0cnVlOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCYXJlTGluayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdvTmVpZ2hib3JDaGFycyA9IGNoYXJBdFRleHRFbmQrY2hhckF0TGlua0JlZ2luOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIWxpbmtXaXRoTm9UZXh0ICYmIChpc0JhcmVMaW5rIHx8ICFyZWdOb05lZWRTcGFjZS50ZXN0KHR3b05laWdoYm9yQ2hhcnMpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzZXR0aW5ncy5MaW5rU3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gTGluay4yIFx1NTk4Mlx1Njc5Q1x1OEJFNVx1NTMzQVx1NTc1N1x1NjcwOVx1NTE0OVx1NjgwN1x1RkYwQ1x1NTIxOVx1OEJBMVx1N0I5N1x1NjcwMFx1N0VDOFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIExpbmsuMyBcdTY2RjRcdTY1QjBcdTUzRDhcdTkxQ0ZcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5saW5rO1xuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDMuMi41IFx1NTkwNFx1NzQwNlx1NzUyOFx1NjIzN1x1ODFFQVx1NUI5QVx1NEU0OVx1NTMzQVx1NTc1N1x1NzY4NFx1OTBFOFx1NTIwNlxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XG4gICAgICAgICAgICAgICAgLy8gVXNlci4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgfHwgc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXNlci4yIFx1NTk4Mlx1Njc5Q1x1OEJFNVx1NTMzQVx1NTc1N1x1NjcwOVx1NTE0OVx1NjgwN1x1RkYwQ1x1NTIxOVx1OEJBMVx1N0I5N1x1NjcwMFx1N0VDOFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIExpbmsuMyBcdTY2RjRcdTY1QjBcdTUzRDhcdTkxQ0ZcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS51c2VyO1xuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IobGV0IGk9MDtpPGxpbmVQYXJ0cy5sZW5ndGg7aSsrKVxuICAgIHtcbiAgICAgICAgaWYobGluZVBhcnRzW2ldLnR5cGUgPT09IElubGluZVR5cGUudGV4dCAmJiBsaW5lUGFydHNbaV0uY29udGVudCE9bGluZVBhcnRzT3JpZ2luW2ldLmNvbnRlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGxpbmVQYXJ0c1tpXS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzT3JpZ2luW2ldLmJlZ2luLFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c09yaWdpbltpXS5lbmQsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbGluZVBhcnRzT3JpZ2luW2ldLmNvbnRlbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbmxpbmVDaGFuZ2VMaXN0ID0gaW5saW5lQ2hhbmdlTGlzdC5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XG4gICAgcmV0dXJuIFtyZXN1bHRMaW5lLCByZXN1bHRDdXJzb3JDaCwgaW5saW5lQ2hhbmdlTGlzdF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Bvc2l0aW9uQmVmb3JlKHBvczE6IEVkaXRvclBvc2l0aW9uLCBwb3MyOiBFZGl0b3JQb3NpdGlvbik6IGJvb2xlYW5cbntcbiAgICBpZihwb3MxLmxpbmUgPCBwb3MyLmxpbmUpIHJldHVybiB0cnVlO1xuICAgIGVsc2UgaWYgKHBvczEubGluZSA+IHBvczIubGluZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIGlmKHBvczEuY2ggPCBwb3MyLmNoKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXlJOzs7QUNBekksc0JBQXVDO0FBRWhDLElBQUs7QUFBTCxVQUFLLGFBQUw7QUFBaUIsd0JBQUs7QUFBUSx3QkFBSztBQUFRLDJCQUFRO0FBQVcsd0JBQUs7QUFBUSx3QkFBSztBQUFnQix3QkFBSztBQUFBLEdBQWhHO0FBQ0wsSUFBSztBQUFM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
